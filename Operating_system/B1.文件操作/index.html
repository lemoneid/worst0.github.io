<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Wiki Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Wiki Blog Atom Feed">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><title data-react-helmet="true">B1.æ–‡ä»¶æ“ä½œ | My Wiki</title><meta data-react-helmet="true" property="og:url" content="https://worst0.github.io/Operating_system/B1.æ–‡ä»¶æ“ä½œ"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="B1.æ–‡ä»¶æ“ä½œ | My Wiki"><meta data-react-helmet="true" name="description" content="å¯¹äºæ–‡ä»¶æ“ä½œ,æœ‰ä¸¤å¥—;"><meta data-react-helmet="true" property="og:description" content="å¯¹äºæ–‡ä»¶æ“ä½œ,æœ‰ä¸¤å¥—;"><meta data-react-helmet="true" property="og:image" content="https://cos.ap-guangzhou.myqcloud.com/wiki-media-1253965369/doc/logo-zip.png"><meta data-react-helmet="true" name="twitter:image" content="https://cos.ap-guangzhou.myqcloud.com/wiki-media-1253965369/doc/logo-zip.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://worst0.github.io/Operating_system/B1.æ–‡ä»¶æ“ä½œ"><link data-react-helmet="true" rel="alternate" href="https://worst0.github.io/Operating_system/B1.æ–‡ä»¶æ“ä½œ" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://worst0.github.io/Operating_system/B1.æ–‡ä»¶æ“ä½œ" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.060912d8.css">
<link rel="preload" href="/assets/js/runtime~main.27f44f86.js" as="script">
<link rel="preload" href="/assets/js/main.43fd085d.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Wiki logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Wiki logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">My Wiki</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/intro">DocumentğŸ’»</a><a class="navbar__item navbar__link" href="/blog">BlogğŸ¤“</a><a class="navbar__item navbar__link" href="/ReadingNotes/A1.Sentence">Reading-BookğŸ“š</a><a class="navbar__item navbar__link" href="/Xmind_IMG/1.è§£é¢˜æ€ç»´">XmindğŸ®</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/worst0/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://github.com/worst0/wiki_note" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">æœ¬ç«™æºç </a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT" style="margin-left:2px">ğŸŒ™</span></div><div class="react-toggle-track-x"><span class="toggle_71bT" style="margin-left:1px">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Wiki logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Wiki logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">My Wiki</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/intro">DocumentğŸ’»</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">BlogğŸ¤“</a></li><li class="menu__list-item"><a class="menu__link" href="/ReadingNotes/A1.Sentence">Reading-BookğŸ“š</a></li><li class="menu__list-item"><a class="menu__link" href="/Xmind_IMG/1.è§£é¢˜æ€ç»´">XmindğŸ®</a></li><li class="menu__list-item"><a href="https://github.com/worst0/" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://github.com/worst0/wiki_note" target="_blank" rel="noopener noreferrer" class="menu__link">æœ¬ç«™æºç </a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">intro</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/intro">Readme</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">1.Linux</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Linux å‘½ä»¤</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/A1.linuxåŸºç¡€">A1.linuxåŸºç¡€</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/A2.Linuxå‘½ä»¤">A2.Linuxå‘½ä»¤</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/A3.å‹ç¼©">å‹ç¼©</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/A4.æ•°æ®æå–">æ•°æ®æå–</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/A5.Linuxå‘½ä»¤è¡¥å……">Linuxå‘½ä»¤</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">shellè„šæœ¬</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/shellè„šæœ¬è¯­æ³•">shellè„šæœ¬è¯­æ³•</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">ubuntu</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/C1.ubuntuç›¸å…³">C1.ubuntuç›¸å…³</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/C2.ubuntuå¸¸ç”¨è½¯ä»¶">ubuntuå¸¸ç”¨è½¯ä»¶</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/C3.è¯­è¨€ç¯å¢ƒ">è¯­è¨€ç¯å¢ƒ</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">2.Algorithm</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">æ•°æ®ç»“æ„</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/A1.DataStructure">æ•°æ®ç»“æ„å’Œç®—æ³•</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">ç®—æ³•è®¾è®¡</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/B1.ç®—æ³•è®¾è®¡">ç®—æ³•è®¾è®¡</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/C1.Algorithm">ç®—æ³•</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/D1.ACMæ¨¡æ¿">ACMæ¨¡æ¿</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">æ•°å­¦</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/E1.concrete">E1.concrete</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/E2.Combinatorics">ç»„åˆæ•°å­¦ï¼ˆCombinatoricsï¼‰</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">3.Online_Judge</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">OJ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Online_Judge/A1.Leetcode">A1.Leetcode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Online_Judge/B1.HZOJ">HZOJ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Online_Judge/C1.nowcoder">nowcoder</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Online_Judge/D1.EP">D1.EP</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">4.Programming_Language</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">C</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Language/A1.CBasic">A1.CBasic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Language/A2.Cimprove">A2.Cimprove</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Language/A3.Cè¯­è¨€æŠ€å·§">A3.Cè¯­è¨€æŠ€å·§</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">C++</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Language/B1.C++">B1.C++</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Language/B2.STL">STL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Language/B3.C++-exercise">C++-exercise</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Language/B4.C++-others">C++ othres</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">python</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Language/C1.python">C1.python</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Language/C2.conda">C2.conda</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">5.Operating_system</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">æ“ä½œç³»ç»Ÿ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/A1.os">OS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/A2.æ“ä½œç³»ç»Ÿ">A2.æ“ä½œç³»ç»Ÿ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/C1.è®¡ç®—æœºåŸç†">C1.è®¡ç®—æœºåŸç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/D1.CSAPP">D1.CSAPP</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">ç³»ç»Ÿç¼–ç¨‹</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/Operating_system/B1.æ–‡ä»¶æ“ä½œ">æ–‡ä»¶æ“ä½œ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Operating_system/B2.Linuxå‘½ä»¤è¡Œè§£æ">Linuxå‘½ä»¤è¡Œè§£æ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Operating_system/B3.å¤šè¿›ç¨‹">å¤šè¿›ç¨‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Operating_system/B4.å¤šçº¿ç¨‹">å¤šçº¿ç¨‹çº¿ç¨‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Operating_system/B5.IPC">IPCï¼šè¿›ç¨‹é—´é€šä¿¡</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Operating_system/B6.IO">B6.IO</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Operating_system/B7.mmap">B7.mmap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Operating_system/B8.socket">B8.socket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Operating_system/B9.æ–‡ä»¶ä¼ è¾“">B9.æ–‡ä»¶ä¼ è¾“</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Operating_system/B10.IOæ¨¡å‹">B10.IOæ¨¡å‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Operating_system/B11.sleepå’Œé—´éš”è®¡æ—¶å™¨">B11.sleepå’Œé—´éš”è®¡æ—¶å™¨</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">6.Network</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Network/A1.è®¡ç®—æœºç½‘ç»œ">A1.è®¡ç®—æœºç½‘ç»œ</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">7.Server</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Server/A1.Linuxé«˜æ€§èƒ½æœåŠ¡å™¨">Linuxé«˜æ€§èƒ½æœåŠ¡å™¨</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">8.Database</a><ul class="menu__list"></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">9.Programming_Stardard</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Stardard/A1.Cç¼–ç¨‹è§„èŒƒ">A1.Cç¼–ç¨‹è§„èŒƒ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Stardard/B1.ç¼–ç è‹±æ–‡ç¼©å†™">B1.ç¼–ç è‹±æ–‡ç¼©å†™</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Stardard/B2.è‹±æ–‡æ ‡å‡†ç¼©å†™">B2.è‹±æ–‡æ ‡å‡†ç¼©å†™</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">10.Skill</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Skill/A1.Latexæ•°å­¦å…¬å¼">A1.Latexæ•°å­¦å…¬å¼</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Skill/B1.Markdownè¯­æ³•">B1.Markdownè¯­æ³•</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Skill/C1.git">C1.git</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Skill/C2.github">GitHub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Skill/D1.è®¡ç®—æœºè‹±è¯­">è®¡ç®—æœºè‹±è¯­</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">11.Interview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Interview/A1.é¢è¯•">é¢è¯•</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">99.other</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/other/A1.ä¸´æ—¶">ä¸´æ—¶</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/other/B1.ä¸´æ—¶ç¬”è®°">ä¸´æ—¶ç¬”è®°</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/other/C1.task">task</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">æ–‡ä»¶æ“ä½œ</h1></header><div class="markdown"><p>å¯¹äºæ–‡ä»¶æ“ä½œ,æœ‰ä¸¤å¥—;</p><ol><li>ä¸€å¥—åŸºäºæ–‡ä»¶æè¿°ç¬¦<code>int fd</code></li><li>ä¸€å¥—åŸºäºæ–‡ä»¶æµ<code>FILE *fp</code></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="fd"></a>fd<a class="hash-link" href="#fd" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">open</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">pathname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> flags</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">open</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">pathname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> flags</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">mode_t</span><span class="token plain"> mode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">creat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">pathname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">mode_t</span><span class="token plain"> mode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token class-name" style="color:rgb(255, 203, 107)">ssize_t</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">read</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> fd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">buf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">size_t</span><span class="token plain"> count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token class-name" style="color:rgb(255, 203, 107)">ssize_t</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">write</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> fd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">buf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">size_t</span><span class="token plain"> count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">close</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> fd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//0ä¸ºsuccessï¼Œ-1ä¸ºerror</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fd_in </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">open</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">argv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> O_RDONLY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">perror</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;open error&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">exit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fd_out </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">creat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">argv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> COPYMODE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">perror</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;create error&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">exit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">BUFFER</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">ssize_t</span><span class="token plain"> size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">size </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">read</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fd_in</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> BUFFER</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">write</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fd_out</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">perror</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;write error&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">exit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">size </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">perror</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;read error&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">exit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="fp"></a>fp<a class="hash-link" href="#fp" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    FILE </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token function" style="color:rgb(130, 170, 255)">fopen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">pathname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">mode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    FILE </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token function" style="color:rgb(130, 170, 255)">fdopen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> fd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">mode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">size_t</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fread</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">ptr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">size_t</span><span class="token plain"> size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">size_t</span><span class="token plain"> nmemb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> FILE </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token class-name" style="color:rgb(255, 203, 107)">size_t</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fwrite</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">ptr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">size_t</span><span class="token plain"> size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">size_t</span><span class="token plain"> nmemb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> FILE </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">feof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">FILE </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fgetc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">FILE </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token function" style="color:rgb(130, 170, 255)">fgets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> FILE </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">ssize_t</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getline</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">lineptr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">size_t</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> FILE </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fileno</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">FILE </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="äºŒã€æ–‡ä»¶æè¿°ç¬¦å’Œæ–‡ä»¶æµæŒ‡é’ˆ"></a>äºŒã€æ–‡ä»¶æè¿°ç¬¦å’Œæ–‡ä»¶æµæŒ‡é’ˆ<a class="hash-link" href="#äºŒã€æ–‡ä»¶æè¿°ç¬¦å’Œæ–‡ä»¶æµæŒ‡é’ˆ" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">open</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> access</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> mode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    path è¦æ‰“å¼€çš„æ–‡ä»¶è·¯å¾„å’Œåç§°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    access è®¿é—®æ¨¡å¼ï¼Œå®å®šä¹‰å’Œå«ä¹‰å¦‚ä¸‹ï¼š  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">FILE </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token function" style="color:rgb(130, 170, 255)">fopen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">filename</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">mode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  filename æ–‡ä»¶åç§°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  mode æ‰“å¼€æ¨¡å¼ï¼š              </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>â€‹    r  åªè¯»æ–¹å¼æ‰“å¼€ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶<br>
â€‹    rb åªè¯»æ–¹å¼æ‰“å¼€ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶<br>
â€‹    w  åªå†™æ–¹å¼æ‰“å¼€ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶<br>
â€‹    wb åªå†™æ–¹å¼æ‰“å¼€ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶<br>
â€‹    a  è¿½åŠ æ–¹å¼æ‰“å¼€ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶<br>
â€‹    ab è¿½åŠ æ–¹å¼æ‰“å¼€ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶<br>
â€‹    r+ å¯è¯»å¯å†™æ–¹å¼æ‰“å¼€ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶<br>
â€‹    rb+ å¯è¯»å¯å†™æ–¹å¼æ‰“å¼€ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶<br>
â€‹    w+ å¯è¯»å¯å†™æ–¹å¼åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶<br>
â€‹    wb+ å¯è¯»å¯å†™æ–¹å¼ç”Ÿæˆä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶<br>
â€‹    a+ å¯è¯»å¯å†™è¿½åŠ æ–¹å¼æ‰“å¼€ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶<br>
â€‹    ab+ å¯è¯»å¯å†™æ–¹å¼è¿½åŠ ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly asciiarmor"><div tabindex="0" class="prism-code language-asciiarmor codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              â”‚fopen() mode                              â”‚ open() flags                  â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              â”‚     r                                                   â”‚ O_RDONLY                      â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              â”‚     w                                                  â”‚ O_WRONLY | O_CREAT | O_TRUNC  â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              â”‚     a                                                   â”‚ O_WRONLY | O_CREAT | O_APPEND â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              â”‚     r+                                                 â”‚ O_RDWR                        â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              â”‚     w+                                               â”‚ O_RDWR | O_CREAT | O_TRUNC    â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              â”‚     a+                                                â”‚ O_RDWR | O_CREAT | O_APPEND   â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>â€‹    </p><p>openå’Œfopençš„åŒºåˆ«ï¼š
å‰è€…å±äºä½çº§IOï¼Œåè€…æ˜¯é«˜çº§IOã€‚
å‰è€…è¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œåè€…è¿”å›ä¸€ä¸ªæ–‡ä»¶æŒ‡é’ˆã€‚
å‰è€…æ— ç¼“å†²ï¼Œåè€…æœ‰ç¼“å†²ã€‚
å‰è€…ä¸ read, write ç­‰é…åˆä½¿ç”¨ï¼Œ åè€…ä¸ fread, fwriteç­‰é…åˆä½¿ç”¨ã€‚
åè€…æ˜¯åœ¨å‰è€…çš„åŸºç¡€ä¸Šæ‰©å……è€Œæ¥çš„ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç”¨åè€…ã€‚ </p><p>fopen /openåŒºåˆ«æ€»ç»“</p><p>UNIXç¯å¢ƒä¸‹çš„C å¯¹äºŒè¿›åˆ¶æµæ–‡ä»¶çš„è¯»å†™æœ‰ä¸¤å¥—ç­å­ï¼š1) fopen,fread,fwrite ; 2) open, read, writeè¿™é‡Œç®€å•çš„ä»‹ç»ä¸€ä¸‹ä»–ä»¬çš„åŒºåˆ«ã€‚</p><ol><li>fopen ç³»åˆ—æ˜¯æ ‡å‡†çš„Cåº“å‡½æ•°ï¼›openç³»åˆ—æ˜¯ POSIX å®šä¹‰çš„ï¼Œæ˜¯UNIXç³»ç»Ÿé‡Œçš„system callã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œfopenç³»åˆ—æ›´å…·æœ‰å¯ç§»æ¤æ€§ï¼›è€Œopenç³»åˆ—åªèƒ½ç”¨åœ¨ POSIX çš„æ“ä½œç³»ç»Ÿä¸Šã€‚</li><li>ä½¿ç”¨fopen ç³»åˆ—å‡½æ•°æ—¶è¦å®šä¹‰ä¸€ä¸ªæŒ‡ä»£æ–‡ä»¶çš„å¯¹è±¡ï¼Œè¢«ç§°ä¸ºâ€œæ–‡ä»¶å¥æŸ„â€ï¼ˆfile handlerï¼‰ï¼Œæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼›è€Œopenç³»åˆ—ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªè¢«ç§°ä¸ºâ€œæ–‡ä»¶æè¿°ç¬¦â€ ï¼ˆfile descriptorï¼‰çš„intå‹æ•´æ•°ã€‚</li><li>fopen ç³»åˆ—æ˜¯çº§åˆ«è¾ƒé«˜çš„I/Oï¼Œè¯»å†™æ—¶ä½¿ç”¨ç¼“å†²ï¼›è€Œopenç³»åˆ—ç›¸å¯¹ä½å±‚ï¼Œæ›´æ¥è¿‘æ“ä½œç³»ç»Ÿï¼Œè¯»å†™æ—¶æ²¡æœ‰ç¼“å†²ã€‚ç”±äºèƒ½æ›´å¤šåœ°ä¸æ“ä½œç³»ç»Ÿæ‰“äº¤é“ï¼Œopenç³»åˆ—å¯ä»¥è®¿é—®æ›´æ”¹ä¸€äº›fopenç³»åˆ—æ— æ³•è®¿é—®çš„ä¿¡æ¯ï¼Œå¦‚æŸ¥çœ‹æ–‡ä»¶çš„è¯»å†™æƒé™ã€‚è¿™äº›é¢å¤–çš„åŠŸèƒ½é€šå¸¸å› ç³»ç»Ÿè€Œå¼‚ã€‚</li><li>ä½¿ç”¨fopenç³»åˆ—å‡½æ•°éœ€è¦<code>#include &lt;sdtio.h&gt;</code>ï¼›ä½¿ç”¨openç³»åˆ—å‡½æ•°éœ€è¦<code>#include &lt;fcntl.h&gt;</code> ï¼Œé“¾æ¥æ—¶è¦ä¹‹ç”¨libcï¼ˆ-lcï¼‰</li></ol><p>å°ç»“ï¼š
æ€»çš„æ¥è¯´ï¼Œä¸ºäº†ä½¿ç¨‹åºè·å¾—æ›´å¥½çš„å¯ç§»æ¤æ€§ï¼Œæœªåˆ°éå¾—ä½¿ç”¨ä¸€äº›fopenç³»åˆ—æ— æ³•å®ç°çš„åŠŸèƒ½çš„æƒ…å†µä¸‹ï¼Œfopenç³»åˆ—æ˜¯é¦–é€‰ã€‚</p><p>read/writeå’Œfread/fwriteåŒºåˆ«</p><p>1,freadæ˜¯å¸¦ç¼“å†²çš„,readä¸å¸¦ç¼“å†².
2,fopenæ˜¯æ ‡å‡†cé‡Œå®šä¹‰çš„,openæ˜¯POSIXä¸­å®šä¹‰çš„.
3,freadå¯ä»¥è¯»ä¸€ä¸ªç»“æ„.readåœ¨linux/unixä¸­è¯»äºŒè¿›åˆ¶ä¸æ™®é€šæ–‡ä»¶æ²¡æœ‰åŒºåˆ«.
4,fopenä¸èƒ½æŒ‡å®šè¦åˆ›å»ºæ–‡ä»¶çš„æƒé™.openå¯ä»¥æŒ‡å®šæƒé™.
5,fopenè¿”å›æŒ‡é’ˆ,openè¿”å›æ–‡ä»¶æè¿°ç¬¦(æ•´æ•°).
6,linux/unixä¸­ä»»ä½•è®¾å¤‡éƒ½æ˜¯æ–‡ä»¶,éƒ½å¯ä»¥ç”¨open,read.</p><p>å¦‚æœæ–‡ä»¶çš„å¤§å°æ˜¯8kã€‚ä½ å¦‚æœç”¨read/writeï¼Œä¸”åªåˆ†é…äº†2kçš„ç¼“å­˜ï¼Œåˆ™è¦å°†æ­¤æ–‡ä»¶è¯»å‡ºéœ€è¦åš4æ¬¡ç³»ç»Ÿè°ƒç”¨æ¥å®é™…ä»ç£ç›˜ä¸Šè¯»å‡ºã€‚
å¦‚æœä½ ç”¨fread/fwriteï¼Œåˆ™ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ç¼“å­˜ï¼Œåˆ™è¯»å‡ºæ­¤æ–‡ä»¶åªè¦ä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨ä»ç£ç›˜ä¸Šè¯»å‡ºã€‚
ä¹Ÿå°±æ˜¯ç”¨read/writeè¦è¯»4æ¬¡ç£ç›˜ï¼Œè€Œç”¨fread/fwriteåˆ™åªè¦è¯»1æ¬¡ç£ç›˜ã€‚æ•ˆç‡æ¯”read/writeè¦é«˜4å€ã€‚
å¦‚æœç¨‹åºå¯¹å†…å­˜æœ‰é™åˆ¶ï¼Œåˆ™ç”¨read/writeæ¯”è¾ƒå¥½ã€‚
éƒ½ç”¨fread å’Œfwrite,å®ƒè‡ªåŠ¨åˆ†é…ç¼“å­˜,é€Ÿåº¦ä¼šå¾ˆå¿«,æ¯”è‡ªå·±æ¥åšè¦ç®€å•ã€‚å¦‚æœè¦å¤„ç†ä¸€äº›ç‰¹æ®Šçš„æè¿°ç¬¦,ç”¨readå’Œwrite,å¦‚å¥—æ¥å£,ç®¡é“ä¹‹ç±»çš„
ç³»ç»Ÿè°ƒç”¨writeçš„æ•ˆç‡å–å†³äºä½ bufçš„å¤§å°å’Œä½ è¦å†™å…¥çš„æ€»æ•°é‡ï¼Œå¦‚æœbufå¤ªå°ï¼Œä½ è¿›å…¥å†…æ ¸ç©ºé—´çš„æ¬¡æ•°å¤§å¢ï¼Œæ•ˆç‡å°±ä½ä¸‹ã€‚è€Œfwriteä¼šæ›¿ä½ åšç¼“å­˜ï¼Œå‡å°‘äº†å®é™…å‡ºç°çš„ç³»ç»Ÿè°ƒç”¨ï¼Œæ‰€ä»¥æ•ˆç‡æ¯”è¾ƒé«˜ã€‚</p><p>==POSIX:<strong>å¯ç§»æ¤æ“ä½œç³»ç»Ÿæ¥å£</strong>==</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="äºŒã€-æ–‡ä»¶æè¿°ç¬¦å’Œæ–‡ä»¶æŒ‡é’ˆçš„å…³ç³»"></a>äºŒã€ æ–‡ä»¶æè¿°ç¬¦å’Œæ–‡ä»¶æŒ‡é’ˆçš„å…³ç³»<a class="hash-link" href="#äºŒã€-æ–‡ä»¶æè¿°ç¬¦å’Œæ–‡ä»¶æŒ‡é’ˆçš„å…³ç³»" title="Direct link to heading">#</a></h3><p> åœ¨Linuxç³»ç»Ÿä¸­ä¸€åˆ‡çš†å¯ä»¥çœ‹æˆæ˜¯æ–‡ä»¶ï¼Œæ–‡ä»¶åˆå¯åˆ†ä¸ºï¼šæ™®é€šæ–‡ä»¶ã€ç›®å½•æ–‡ä»¶ã€é“¾æ¥æ–‡ä»¶å’Œè®¾å¤‡æ–‡ä»¶ã€‚æ–‡ä»¶æè¿°ç¬¦ï¼ˆfile descriptorï¼‰æ˜¯å†…æ ¸ä¸ºäº†é«˜æ•ˆç®¡ç†å·²è¢«æ‰“å¼€çš„æ–‡ä»¶æ‰€åˆ›å»ºçš„ç´¢å¼•ï¼Œå…¶æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ï¼ˆé€šå¸¸æ˜¯å°æ•´æ•°ï¼‰ï¼Œç”¨äºæŒ‡ä»£è¢«æ‰“å¼€çš„æ–‡ä»¶ï¼Œæ‰€æœ‰æ‰§è¡ŒI/Oæ“ä½œçš„ç³»ç»Ÿè°ƒç”¨éƒ½é€šè¿‡æ–‡ä»¶æè¿°ç¬¦ã€‚ç¨‹åºåˆšåˆšå¯åŠ¨çš„æ—¶å€™ï¼Œ0æ˜¯æ ‡å‡†è¾“å…¥ï¼Œ1æ˜¯æ ‡å‡†è¾“å‡ºï¼Œ2æ˜¯æ ‡å‡†é”™è¯¯ã€‚å¦‚æœæ­¤æ—¶å»æ‰“å¼€ä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œå®ƒçš„æ–‡ä»¶æè¿°ç¬¦ä¼šæ˜¯3ã€‚<strong>POSIXæ ‡å‡†è¦æ±‚æ¯æ¬¡æ‰“å¼€æ–‡ä»¶æ—¶ï¼ˆå«socketï¼‰å¿…é¡»ä½¿ç”¨å½“å‰è¿›ç¨‹ä¸­**</strong>æœ€å°å¯ç”¨çš„æ–‡ä»¶æè¿°ç¬¦å·ç ï¼Œå› æ­¤ï¼Œåœ¨ç½‘ç»œé€šä¿¡è¿‡ç¨‹ä¸­ç¨ä¸æ³¨æ„å°±æœ‰å¯èƒ½é€ æˆä¸²è¯**ã€‚æ ‡å‡†æ–‡ä»¶æè¿°ç¬¦å›¾å¦‚ä¸‹ï¼š</p><p>Linuxç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶æè¿°ç¬¦å¯¹åº”ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶ï¼ŒåŒæ—¶ä¸åŒçš„æ–‡ä»¶æè¿°ç¬¦ä¹Ÿå¯ä»¥æŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶ã€‚ç›¸åŒçš„æ–‡ä»¶å¯ä»¥è¢«ä¸åŒçš„è¿›ç¨‹æ‰“å¼€ï¼Œæ¯ä¸ªè¿›ç¨‹ä¸­æœ‰å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ï¼ˆå¯ä»¥ç›¸åŒä¹Ÿå¯ä¸ç›¸åŒï¼‰ï¼›ç›¸åŒæ–‡ä»¶ä¹Ÿå¯ä»¥åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­å¤šæ¬¡æ‰“å¼€ï¼ˆå¯¹åº”ä¸åŒçš„æ–‡ä»¶æè¿°ç¬¦ï¼‰ã€‚ä¸Šé¢å·²ç®€å•è¯´æ˜ï¼Œä¸ºäº†é«˜æ•ˆç®¡ç†æ‰“å¼€çš„æ–‡ä»¶ï¼ŒLinuxç³»ç»Ÿä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤äº†ä¸€ä¸ªæ–‡ä»¶æè¿°è¡¨ï¼Œè¯¥è¡¨çš„å€¼éƒ½æ˜¯ä»0å¼€å§‹çš„ï¼Œæ‰€ä»¥åœ¨ä¸åŒçš„è¿›åŸä¸­å¯ä»¥çœ‹åˆ°ç›¸åŒçš„æ–‡ä»¶æè¿°ç¬¦ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œç›¸åŒçš„æ–‡ä»¶æè¿°ç¬¦æœ‰å¯èƒ½æŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶ï¼Œä¹Ÿæœ‰å¯èƒ½æŒ‡å‘ä¸åŒçš„æ–‡ä»¶ï¼Œå…·ä½“æƒ…å†µè¦ä¾æ®å…·ä½“åœºæ™¯åˆ†æã€‚è¦æƒ³ç†è§£å…·ä½“çš„æ¦‚å†µï¼Œéœ€è¦äº†è§£å’ŒæŸ¥çœ‹å†…æ ¸ç»´æŠ¤çš„3ä¸ªæ•°æ®ç»“æ„ï¼š</p><p>è¿›ç¨‹çº§çš„æ–‡ä»¶æè¿°ç¬¦è¡¨
ç³»ç»Ÿçº§çš„æ‰“å¼€æ–‡ä»¶æè¿°ç¬¦è¡¨
æ–‡ä»¶ç³»ç»Ÿçš„i-nodeè¡¨
è¿›ç¨‹çº§çš„æ–‡ä»¶æè¿°ç¬¦è¡¨ä¸­çš„æ¯ä¸€é¡¹è®°å½•äº†è¯¥è¿›ç¨‹ä¸­å•ä¸ªæ–‡ä»¶æè¿°ç¬¦çš„ç›¸å…³ä¿¡æ¯ã€‚
æ§åˆ¶æ–‡ä»¶æè¿°ç¬¦çš„ä¸€ç»„æ ‡å¿—ï¼ˆç›®å‰ï¼Œæ­¤ç±»æ ‡è®°åªå®šä¹‰äº†ä¸€ä¸ªï¼Œå³close-on-execï¼‰
å¯¹åº”æ‰“å¼€æ–‡ä»¶å¥æŸ„çš„åº”ç”¨ï¼ˆæ–‡ä»¶æŒ‡é’ˆï¼‰
æ–‡ä»¶æŒ‡é’ˆï¼šCè¯­è¨€ä¸­ä½¿ç”¨æ–‡ä»¶æŒ‡é’ˆä½œä¸ºI/Oå¥æŸ„ã€‚æ–‡ä»¶æŒ‡é’ˆæŒ‡å‘è¿›ç¨‹ç”¨æˆ·åŒºä¸­çš„ä¸€ä¸ªè¢«ç§°ä¸ºFILEç»“æ„çš„æ•°æ®ç»“æ„ã€‚å…¶ä¸­ï¼ŒFILEç»“æ„åŒ…æ‹¬ä¸€ä¸ªç¼“å†²åŒºå’Œä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œæ”¹æ–‡ä»¶æè¿°ç¬¦å°±æ˜¯PCBä¸­æ–‡ä»¶æè¿°ç¬¦è¡¨ä¸­çš„ä¸€ä¸ªç´¢å¼•ã€‚å› æ­¤ï¼Œä»æŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œæ–‡ä»¶æŒ‡é’ˆå°±æ˜¯æ–‡ä»¶å¥æŸ„çš„å¥æŸ„ã€‚</p><p>Linuxå†…æ ¸å¯¹æ‰€æœ‰æ‰“å¼€æ–‡ä»¶çš„ç»´æŠ¤æœ‰ä¸€ä¸ªç³»ç»Ÿçº§çš„æè¿°ç¬¦è¡¨(open file descriptor table)ï¼Œæˆ–ç§°ä¹‹ä¸ºæ‰“å¼€æ–‡ä»¶è¡¨(open file table)ã€‚è¡¨ä¸­æ¯æ¡è®°å½•ç§°ä¸ºæ‰“å¼€æ–‡ä»¶å¥æŸ„(open file handler)ï¼Œä¸€ä¸ªæ‰“å¼€æ–‡ä»¶å¥æŸ„å­˜å‚¨äº†ä¸ä¸€ä¸ªæ‰“å¼€æ–‡ä»¶ç›¸å…³çš„å…¨éƒ¨ä¿¡æ¯ï¼Œè­¬å¦‚ï¼šå½“å‰æ–‡ä»¶åç§»é‡ã€æ–‡ä»¶è®¿é—®æ¨¡å¼ã€è¯¥æ–‡ä»¶i-nodeå¯¹è±¡çš„å¼•ç”¨ã€æ–‡ä»¶ç±»å‹å’Œè®¿é—®æƒé™ç­‰ã€‚</p><p>ä¸‹å›¾å±•ç¤ºäº†æ–‡ä»¶æè¿°ç¬¦ã€æ‰“å¡æ–‡ä»¶å¥æŸ„ï¼ˆæ–‡ä»¶æŒ‡é’ˆï¼‰ã€æ‰“å¼€æ–‡ä»¶ä»¥åŠi-nodeä¹‹é—´çš„å…³ç³»ï¼Œå…¶ä¸­ï¼Œä¸‰ä¸ªè¿›ç¨‹æ‹¥æœ‰å¤šä¸ªæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ã€‚</p><p>Process 1ä¸­ï¼Œæ–‡ä»¶æè¿°ç¬¦3å’Œ21éƒ½æŒ‡å‘äº†åŒä¸€ä¸ªæ–‡ä»¶aï¼Œè¿™å¯èƒ½æ˜¯é€šè¿‡dup()ã€dup2()ã€fcntl()æˆ–å¯¹åŒä¸€ä¸ªæ–‡ä»¶å¤šæ¬¡è°ƒç”¨open()å‡½æ•°å½¢æˆçš„ï¼›
Process 1æ–‡ä»¶æè¿°ç¬¦21å’ŒProcess 2ä¸­æ–‡ä»¶æè¿°ç¬¦35éƒ½æŒ‡å‘æ–‡ä»¶aï¼Œä½†æ˜¯å´å¯¹åº”ä¸¤ä¸ªä¸åŒæ‰“å¼€æ–‡ä»¶å¥æŸ„(æ–‡ä»¶æŒ‡é’ˆ)ï¼ŒäºŒè€…æ‰“å¼€æ¨¡å¼ä¸åŒ(O_RDONLYä¸O_WRDONLY)ã€‚è¿™ç§æƒ…å½¢å¯èƒ½æ˜¯è°ƒç”¨fork()ååˆ›å»ºå­è¿›ç¨‹ï¼Œæˆ–æŸä¸ªè¿›ç¨‹é€šè¿‡UNIXå¥—æ¥å­—å°†ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ä¼ é€’ç»™å¦ä¸€ä¸ªè¿›ç¨‹ï¼Œæˆ–ä¸¤ä¸ªç‹¬ç«‹çš„è¿›ç¨‹åˆ†åˆ«open()æ‰“å¼€åŒä¸€ä¸ªæ–‡ä»¶ã€‚
Process 1å’ŒProcess 3ä¸­æ–‡ä»¶æè¿°ç¬¦3åˆ†åˆ«å¯¹åº”æ–‡ä»¶aå’Œæ–‡ä»¶bã€‚</p><p>æ–‡ä»¶å¥æŸ„ä¹Ÿç§°ä¸ºæ–‡ä»¶æŒ‡é’ˆ(FILE *)ï¼šCè¯­è¨€ä¸­ä½¿ç”¨æ–‡ä»¶æŒ‡é’ˆåšä¸ºI/Oçš„å¥æŸ„ã€‚æ–‡ä»¶æŒ‡é’ˆæŒ‡å‘è¿›ç¨‹ç”¨æˆ·åŒºä¸­çš„ä¸€ä¸ªè¢«ç§°ä¸ºFILEç»“æ„çš„æ•°æ®ç»“æ„ã€‚FILEç»“æ„åŒ…æ‹¬ä¸€ä¸ªç¼“å†²åŒºå’Œä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚è€Œæ–‡ä»¶æè¿°ç¬¦æ˜¯æ–‡ä»¶æè¿°ç¬¦è¡¨çš„ä¸€ä¸ªç´¢å¼•ï¼Œå› æ­¤ä»æŸç§æ„ä¹‰ä¸Šè¯´æ–‡ä»¶æŒ‡é’ˆå°±æ˜¯å¥æŸ„çš„å¥æŸ„ï¼ˆåœ¨Windowsç³»ç»Ÿä¸Šï¼Œæ–‡ä»¶æè¿°ç¬¦è¢«ç§°ä½œæ–‡ä»¶å¥æŸ„ï¼‰</p><p> è¿™ä¸ª_IO_FILEç»“æ„ä½“ä¸­çš„â€œint _filenoâ€å°±æ˜¯fdï¼Œå³æ–‡ä»¶æè¿°ç¬¦ã€‚</p><p>è¿™ä¸ªå¯ä»¥é€šè¿‡ç¨‹åºéªŒè¯ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;stdio.h&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;stdlib.h&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;sys/types.h&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;sys/stat.h&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;fcntl.h&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;unistd.h&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> buf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">50</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;file descriptor demo&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        FILE </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">myfile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        myfile </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fopen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;test&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;w+&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">myfile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;error: openfile failed!\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;The openfile&#x27;s descriptor is %d\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> myfile</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">_fileno</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">write</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">myfile</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">_fileno</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">buf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">50</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token function" style="color:rgb(130, 170, 255)">perror</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;error: write file failed!\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token function" style="color:rgb(130, 170, 255)">exit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token keyword" style="font-style:italic">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;writefile successed!\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">exit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ä¸‰ã€-æ–‡ä»¶æè¿°ç¬¦å’Œæ–‡ä»¶æŒ‡é’ˆçš„ç›¸äº’è½¬æ¢"></a>ä¸‰ã€ æ–‡ä»¶æè¿°ç¬¦å’Œæ–‡ä»¶æŒ‡é’ˆçš„ç›¸äº’è½¬æ¢<a class="hash-link" href="#ä¸‰ã€-æ–‡ä»¶æè¿°ç¬¦å’Œæ–‡ä»¶æŒ‡é’ˆçš„ç›¸äº’è½¬æ¢" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1ç†è§£"></a>1.ç†è§£<a class="hash-link" href="#1ç†è§£" title="Direct link to heading">#</a></h4><p>â€‹	æ–‡ä»¶æè¿°ç¬¦ï¼Œåœ¨linuxç³»ç»Ÿä¸­ï¼Œè®¾å¤‡ä¹Ÿæ˜¯ä»¥æ–‡ä»¶çš„å½¢å¼å­˜åœ¨ï¼Œè¦å¯¹è¯¥è®¾å¤‡è¿›è¡Œæ“ä½œå°±å¿…é¡»å…ˆæ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰“å¼€è¿™ä¸ªæ–‡ä»¶å°±ä¼šè·å¾—è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œå®ƒæ˜¯ä¸ªå¾ˆå°çš„æ­£æ•´æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªç´¢å¼•å€¼ï¼ŒæŒ‡å‘å†…æ ¸ä¸ºæ¯ä¸€ä¸ªè¿›ç¨‹æ‰€ç»´æŠ¤çš„è¯¥è¿›ç¨‹æ‰“å¼€æ–‡ä»¶çš„è®°å½•è¡¨ã€‚</p><p>æ–‡ä»¶æè¿°ç¬¦çš„ä¼˜ç‚¹ï¼šå…¼å®¹POSIXæ ‡å‡†ï¼Œè®¸å¤šLinuxå’ŒUNIXç³»ç»Ÿè°ƒç”¨éƒ½ä¾èµ–äºå®ƒã€‚</p><p>ç¼ºç‚¹ï¼šä¸èƒ½ç§»æ¤åˆ°éUNIXç³»ç»Ÿä¸Šï¼Œä¹Ÿä¸ç›´è§‚ã€‚</p><p>   æ–‡ä»¶æŒ‡é’ˆï¼ŒCè¯­è¨€ä¸­ä½¿ç”¨çš„æ˜¯æ–‡ä»¶æŒ‡é’ˆè€Œä¸æ˜¯æ–‡ä»¶æè¿°ç¬¦ä½œä¸ºI/Oçš„å¥æŸ„ï¼Œâ€œæ–‡ä»¶æŒ‡é’ˆï¼ˆfile pointerï¼‰â€æŒ‡å‘è¿›ç¨‹ç”¨æˆ·åŒºä¸­çš„ä¸€ä¸ªè¢«ç§°ä¸ºFILEç»“æ„çš„æ•°æ®ç»“æ„ã€‚FILEç»“æ„åŒ…æ‹¬ä¸€ä¸ªç¼“å†²åŒºå’Œä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å€¼ã€‚è€Œæ–‡ä»¶æè¿°ç¬¦å€¼æ˜¯æ–‡ä»¶æè¿°ç¬¦è¡¨ä¸­çš„ä¸€ä¸ªç´¢å¼•ã€‚ä»æŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œæ–‡ä»¶æŒ‡é’ˆå°±æ˜¯å¥æŸ„çš„å¥æŸ„ã€‚</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2-æ–‡ä»¶æŒ‡é’ˆå¥æŸ„ï¼ˆfileï¼‰ã€æ–‡ä»¶æè¿°ç¬¦ä»¥åŠæ–‡ä»¶è·¯å¾„ï¼ˆfilepathï¼‰çš„ç›¸äº’è½¬æ¢"></a><strong>2. æ–‡ä»¶æŒ‡é’ˆ/å¥æŸ„ï¼ˆFILE*ï¼‰ã€æ–‡ä»¶æè¿°ç¬¦ä»¥åŠæ–‡ä»¶è·¯å¾„ï¼ˆfilepathï¼‰çš„ç›¸äº’è½¬æ¢</strong><a class="hash-link" href="#2-æ–‡ä»¶æŒ‡é’ˆå¥æŸ„ï¼ˆfileï¼‰ã€æ–‡ä»¶æè¿°ç¬¦ä»¥åŠæ–‡ä»¶è·¯å¾„ï¼ˆfilepathï¼‰çš„ç›¸äº’è½¬æ¢" title="Direct link to heading">#</a></h4><p>æ–‡ä»¶è·¯å¾„ åˆ° æ–‡ä»¶æŒ‡é’ˆï¼šfilepath --fopen()--&gt;FILE*;
æ–‡ä»¶è·¯å¾„ åˆ° æ–‡ä»¶æè¿°ç¬¦ï¼šfilepath--open()--fd;
æ–‡ä»¶æè¿°ç¬¦ åˆ° æ–‡ä»¶æŒ‡é’ˆï¼šfd--<strong>fdopen()</strong>--&gt;FILE;
æ–‡ä»¶æŒ‡é’ˆ åˆ° æ–‡ä»¶æè¿°ç¬¦ï¼šFILE--<strong>fileno()</strong>---&gt;fd;</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> argc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">argv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     FILE </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">fp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;stdin fileno:%d\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token function" style="color:rgb(130, 170, 255)">fileno</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token constant" style="color:rgb(130, 170, 255)">stdin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;stdout fileno:%d\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token function" style="color:rgb(130, 170, 255)">fileno</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token constant" style="color:rgb(130, 170, 255)">stdout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;stderr fileno:%d\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token function" style="color:rgb(130, 170, 255)">fileno</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token constant" style="color:rgb(130, 170, 255)">stderr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     fp </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fopen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;aa.c&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;w+&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;aa.c&#x27;fileno %d\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">fp</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">_fileno</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/worst0/wiki_note/edit/main/docs/5.Operating_system/B1.æ–‡ä»¶æ“ä½œ.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-06-21T01:57:04.000Z" class="lastUpdatedDate_1WI_">6/21/2021</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Operating_system/D1.CSAPP"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« D1.CSAPP</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Operating_system/B2.Linuxå‘½ä»¤è¡Œè§£æ"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Linuxå‘½ä»¤è¡Œè§£æ Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#fd" class="table-of-contents__link">fd</a></li><li><a href="#fp" class="table-of-contents__link">fp</a></li><li><a href="#äºŒã€æ–‡ä»¶æè¿°ç¬¦å’Œæ–‡ä»¶æµæŒ‡é’ˆ" class="table-of-contents__link">äºŒã€æ–‡ä»¶æè¿°ç¬¦å’Œæ–‡ä»¶æµæŒ‡é’ˆ</a><ul><li><a href="#äºŒã€-æ–‡ä»¶æè¿°ç¬¦å’Œæ–‡ä»¶æŒ‡é’ˆçš„å…³ç³»" class="table-of-contents__link">äºŒã€ æ–‡ä»¶æè¿°ç¬¦å’Œæ–‡ä»¶æŒ‡é’ˆçš„å…³ç³»</a></li><li><a href="#ä¸‰ã€-æ–‡ä»¶æè¿°ç¬¦å’Œæ–‡ä»¶æŒ‡é’ˆçš„ç›¸äº’è½¬æ¢" class="table-of-contents__link">ä¸‰ã€ æ–‡ä»¶æè¿°ç¬¦å’Œæ–‡ä»¶æŒ‡é’ˆçš„ç›¸äº’è½¬æ¢</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.27f44f86.js"></script>
<script src="/assets/js/main.43fd085d.js"></script>
</body>
</html>