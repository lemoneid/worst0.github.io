<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Wiki Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Wiki Blog Atom Feed">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><title data-react-helmet="true">B1.C++ | My Wiki</title><meta data-react-helmet="true" property="og:url" content="https://worst0.github.io/Programming_Language/B1.C++"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="B1.C++ | My Wiki"><meta data-react-helmet="true" name="description" content="[TOC]"><meta data-react-helmet="true" property="og:description" content="[TOC]"><meta data-react-helmet="true" property="og:image" content="https://cos.ap-guangzhou.myqcloud.com/wiki-media-1253965369/doc/logo-zip.png"><meta data-react-helmet="true" name="twitter:image" content="https://cos.ap-guangzhou.myqcloud.com/wiki-media-1253965369/doc/logo-zip.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://worst0.github.io/Programming_Language/B1.C++"><link data-react-helmet="true" rel="alternate" href="https://worst0.github.io/Programming_Language/B1.C++" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://worst0.github.io/Programming_Language/B1.C++" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.060912d8.css">
<link rel="preload" href="/assets/js/runtime~main.14684a7f.js" as="script">
<link rel="preload" href="/assets/js/main.10465fa9.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Wiki logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Wiki logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">My Wiki</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/intro">Document💻</a><a class="navbar__item navbar__link" href="/blog">Blog🤓</a><a class="navbar__item navbar__link" href="/ReadingNotes/A1.Sentence">Reading-Book📚</a><a class="navbar__item navbar__link" href="/Xmind_IMG/1.解题思维">Xmind🎮</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/worst0/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://github.com/worst0/wiki_note" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">本站源码</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT" style="margin-left:2px">🌙</span></div><div class="react-toggle-track-x"><span class="toggle_71bT" style="margin-left:1px">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Wiki logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Wiki logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">My Wiki</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/intro">Document💻</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog🤓</a></li><li class="menu__list-item"><a class="menu__link" href="/ReadingNotes/A1.Sentence">Reading-Book📚</a></li><li class="menu__list-item"><a class="menu__link" href="/Xmind_IMG/1.解题思维">Xmind🎮</a></li><li class="menu__list-item"><a href="https://github.com/worst0/" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://github.com/worst0/wiki_note" target="_blank" rel="noopener noreferrer" class="menu__link">本站源码</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">intro</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/intro">Readme</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">1.Linux</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Linux 命令</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/A1.linux基础">A1.linux基础</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/A2.Linux命令">A2.Linux命令</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/A3.编译环境">A3.编译环境</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/A4.数据提取">数据提取</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/A5.Linux命令补充">Linux命令</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">shell脚本</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/B1.shell脚本语法">shell脚本语法</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">ubuntu</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/C1.ubuntu相关">C1.ubuntu相关</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/C2.ubuntu常用软件">ubuntu常用软件</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Linux/C3.语言环境">语言环境</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">2.Algorithm</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">数据结构</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/A1.DataStructure">数据结构和算法</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/A2.ADT">A2.ADT</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">算法设计</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/B1.算法设计">算法设计</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/C1.Algorithm">算法</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/D1.ACM模板">ACM模板</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/G1.逻辑思考">G1.逻辑思考</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/H1.算法谜题">H1.算法谜题</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">基础科学</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/E1.concrete">E1.concrete</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/E2.Combinatorics">组合数学（Combinatorics）</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/E3.数学认识">认识数学</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Algorithm/F1.物理认识">F1.物理认识</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">3.Online_Judge</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">OJ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Online_Judge/A1.Leetcode">A1.Leetcode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Online_Judge/B1.HZOJ">HZOJ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Online_Judge/C1.nowcoder">nowcoder</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Online_Judge/D1.EP">D1.EP</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">4.Programming_Language</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">C</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Language/A1.CBasic">A1.CBasic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Language/A2.Cimprove">A2.Cimprove</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Language/A3.C语言技巧">A3.C语言技巧</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">C++</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/Programming_Language/B1.C++">B1.C++</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Programming_Language/B3.C++-exercise">C++-exercise</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Programming_Language/B4.C++-others">C++ othres</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">STL</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Language/C1.STL">STL</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">python</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Language/D1.python">D1.python</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Language/E1.conda">E1.conda</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">5.Operating_system</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">操作系统</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/A1.os">OS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/A2.操作系统">A2.操作系统</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/C1.计算机原理">C1.计算机原理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/D1.CSAPP">D1.CSAPP</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">系统编程</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/B1.文件操作">文件操作</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/B2.Linux命令行解析">Linux命令行解析</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/B3.多进程">多进程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/B4.多线程">多线程线程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/B5.IPC">IPC：进程间通信</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/B6.IO">B6.IO</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/B7.mmap">B7.mmap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/B8.socket">B8.socket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/B9.文件传输">B9.文件传输</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/B10.IO模型">B10.IO模型</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Operating_system/B11.sleep和间隔计时器">B11.sleep和间隔计时器</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">6.Network</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Network/A1.计算机网络">A1.计算机网络</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">7.Server</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Server/A1.Linux高性能服务器">Linux高性能服务器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Server/B1.Linux多线程muduo">C++多线程系统编程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Server/C1.网络编程">C1.网络编程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Server/D1.多进程编程">D1.多进程编程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Server/E1.多线程编程">E1.多线程编程</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">8.Database</a><ul class="menu__list"></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">9.Programming_Stardard</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Stardard/A1.C编程规范">A1.C编程规范</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Stardard/B1.编码英文缩写">B1.编码英文缩写</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Stardard/B2.英文标准缩写">B2.英文标准缩写</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Stardard/C1.重构">重构</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Programming_Stardard/D1.Design_Pattern">Design Pattern</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">10.Skill</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Skill/A1.Latex数学公式">A1.Latex数学公式</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Skill/B1.Markdown语法">B1.Markdown语法</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Skill/C1.git">C1.git</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Skill/C2.github">GitHub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Skill/D1.计算机英语">计算机英语</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Skill/E1.绘图">绘图软件</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">11.Interview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Interview/A1.面试">面试</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Interview/A2.interview">A2.interview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">99.other</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/other/A1.临时">临时</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/other/B1.临时笔记">临时笔记</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/other/C1.task">task</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/other/D1.软件需求">软件需求</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/other/E1.software">E1.software</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">B1.C++</h1></header><div class="markdown"><p>[TOC]</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="c"></a>C++<a class="hash-link" href="#c" title="Direct link to heading">#</a></h1><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="基本知识点"></a>基本知识点<a class="hash-link" href="#基本知识点" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="引言"></a>引言<a class="hash-link" href="#引言" title="Direct link to heading">#</a></h2><blockquote><p>程序=数据结构+算法</p><p>计算机科学是知识，但是编程是技能。</p><p>世界上只有两种编程语言，一种是被人骂的，另一种是没人用的</p><p>C++包含多个范式，例如面向对象编程，函数式编程，模板，以及继承自纯 C 语言的面向过程编程</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="编程范式"></a>编程范式<a class="hash-link" href="#编程范式" title="Direct link to heading">#</a></h2><table><thead><tr><th>编程范式</th><th>思想</th><th>备注</th></tr></thead><tbody><tr><td>面向过程编程(c)</td><td>自顶向下，将大型程序分解成小型让语言满足问题要求</td><td>关注逻辑:算法</td></tr><tr><td>面向对象编程(类)</td><td>自下而上，分析时:从对象-&gt;类-&gt;类上的类。设计与问题本质特性相对应的数据格式&lt;</td><td>关注存储:数据结构</td></tr><tr><td>泛型编程(模板)</td><td>抽象数据类型</td><td></td></tr><tr><td>函数式编程(lambda)</td><td>告诉操作规则,而非提前</td><td></td></tr><tr><td>元编程</td><td>基于模板的编译时期运算的编程方式，这种编程通常被称为模板元编程(template meta-programming)</td><td>constexpr元编程与template元编程一样，都是图灵完备的。 即任何程序中需要表达的计算，都可以通过constexpr元编程的方式来表达</td></tr></tbody></table><ol><li>开发效率 = 编写代码+测试+维护的时间</li><li>首先确定编程范式;然后学习相应的语法特性;</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="c设计哲学"></a>C++设计哲学<a class="hash-link" href="#c设计哲学" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">1. 尽可能在编译器报错:编译错误优于运行错误</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2. 异常处理:以抛异常的方式,尽可能使程序不崩溃而能够运行</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">3. RAII:已构造的对象最终会销毁</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="c是c语言的超集"></a>C++是C语言的超集<a class="hash-link" href="#c是c语言的超集" title="Direct link to heading">#</a></h2><ol><li>头文件:58个</li><li>C语言头文件29个</li><li>STL</li><li>template模板</li><li>lambda</li><li>异常处理</li><li>类和对象</li></ol><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="程序生成"></a>程序生成<a class="hash-link" href="#程序生成" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="源代码cpp"></a>源代码.cpp<a class="hash-link" href="#源代码cpp" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="预编译器i"></a>预编译器.i<a class="hash-link" href="#预编译器i" title="Direct link to heading">#</a></h2><p><code>-E</code> 只激活预处理</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gcc -E hello.c -o hello.i </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#或者 </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gcc  hello.c </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> hello.i</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol><li>所有的 “#define” 删除，并展开所有的宏定义</li><li>处理所有的条件预编译指令，比如：&quot; #if #ifdef #elif #else #endif &quot;</li><li>处理所有的 “#include” 预编译指令</li><li>删除所有的注释 “//” 、 “/* */”</li><li>添加行号和文件名标识，以便编译时产生的行号信息以及用于编译错误或警告时能够显示行号</li><li>保留所有的 “#pragma” 编译器指令</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="编译器s"></a>编译器.s<a class="hash-link" href="#编译器s" title="Direct link to heading">#</a></h2><p><code>-S </code>只激活预处理和编译，就是指把文件编译成为汇编代码</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> gcc -S hello.i -o hello.s </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#或者  </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> gcc -S hello.c -o hello.s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>编译过程是编译器把预处理完的文件进行词法分析、语法分析、语义分析及优化后生成相应的汇编代码</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="汇编器o"></a>汇编器.o<a class="hash-link" href="#汇编器o" title="Direct link to heading">#</a></h2><p><code>-c</code> 只激活预处理,编译,和汇编，生成obj文件,目标代码</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gcc -c hello.s -o hello.o</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#或者</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gcc -S hello.c -o hello.o</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>汇编是把汇编代码转变成中间目标文件</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="链接器"></a>链接器<a class="hash-link" href="#链接器" title="Direct link to heading">#</a></h2><p>启动代码：程序与操作系统的接口设置堆栈，调用main函数
库代码</p><ol><li>静态链接库.a</li><li>动态链接库.so</li></ol><p>二者的区别仅在于程序执行时所需的代码是在运行时动态加载的，还是在编译时静态加载的
链接器ld：从程序员角度，函数库实际上是一些头文件（.h）和库文件（so、或lib、dll）的集合。Linux下的大多数函数都默认将头文件放到/usr/include/目录下，而库文件则放到/usr/lib/目录下</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="可执行代码"></a>可执行代码<a class="hash-link" href="#可执行代码" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gcc hello.c； </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#默认会产生一个a.out 的可执行文件</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gcc−o </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">test</span><span class="token plain"> hello.c；</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#会产生一个test的可执行文件</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="g选项"></a>g++选项<a class="hash-link" href="#g选项" title="Direct link to heading">#</a></h1><table><thead><tr><th>args</th><th>comment</th></tr></thead><tbody><tr><td>-Dmacro</td><td>相当于 C 语言中的 #define macro:-D_D自定义debug输出</td></tr><tr><td>-Dmacro=defn</td><td>相当于 C 语言中的 #define macro=defn</td></tr><tr><td>-Umacro</td><td>相当于 C 语言中的 #undef macro</td></tr><tr><td>-undef</td><td>取消对任何非标准宏的定义</td></tr><tr><td>-include file</td><td>功能就相当于在代码中使用<code>#include&lt;filename&gt;</code></td></tr><tr><td>-C</td><td>在预处理的时候, 不删除注释信息, 一般和-E使用</td></tr><tr><td>-Idir</td><td>指定额外的头文件搜索路径dir。</td></tr><tr><td></td><td>在用 <code>#include &quot;file&quot;</code> 时, gcc/g++ 会先在当前目录查找你所指定的头文件, 如果没找到,他回到默认的头文件目录找, 如果使用 -I 制定了目录,他会先在你所制定的目录查找, 然后再按常规的顺序去找。</td></tr><tr><td></td><td>对于 <code>#include&lt;file&gt;</code>, gcc/g++ 会到 -I 制定的目录查找, 查找不到, 然后将到系统的默认的头文件目录查找</td></tr><tr><td>-llibrary</td><td>链接时搜索指定的函数库library如-lpthread,-lm</td></tr><tr><td>-Ldir</td><td></td></tr><tr><td>-O0 、-O1 、-O2 、-O3</td><td>编译器的优化选项的 4 个级别，-O0 表示没有优化, -O1 为默认值，-O3 优化级别最高。</td></tr><tr><td>-static</td><td>禁止使用动态库，所以编译出来一般很大，不需要动态连接库，就可以运行。</td></tr><tr><td>-std=</td><td>指定编译语言版本</td></tr><tr><td>-shared</td><td>生成共享目标文件。通常用在建立共享库</td></tr><tr><td>-g</td><td>只是编译器，在编译的时候，产生调试信息。</td></tr><tr><td>-w</td><td>不生成任何警告信息</td></tr><tr><td>-Wall</td><td>生成所有警告信息</td></tr><tr><td>-fno-elide-constructors</td><td>关闭RVO</td></tr></tbody></table><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="c相关命令"></a>C++相关命令<a class="hash-link" href="#c相关命令" title="Direct link to heading">#</a></h1><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">1. `od`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2. `nm -C`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">3. `strings`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">4. `c++filt`</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="c基础"></a>C++基础<a class="hash-link" href="#c基础" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="名称空间"></a>名称空间<a class="hash-link" href="#名称空间" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="using编译指令"></a><strong>using编译指令</strong><a class="hash-link" href="#using编译指令" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">using 命名空间名::标识符名;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> //指定的某一个标识符暴露在当前的作用域内</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using namespace 命名空间; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//直接引用整个命名空间</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//命名空间也是允许嵌套的，</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace Outer{ </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    namespace Inner{  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            class Class{ }; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using Outer::Inner::Class;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="using相比与typedef可以定义模板类型"></a><strong>using相比与typedef可以定义模板类型</strong><a class="hash-link" href="#using相比与typedef可以定义模板类型" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">typedef void (*func_t)(int, int);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using func_t = void (*)(int, int);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">template &lt;typename T&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct func_t</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    typedef void (*type)(T, T);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 使用 func_t 模板</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">func_t&lt;int&gt;::type xx_1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /* C++11 */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">template &lt;typename T&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using func_t = void (*)(T, T);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 使用 func_t 模板</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">func_t&lt;int&gt; xx_2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* C++11 */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">template &lt;typename T&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using func_t = void (*)(T, T);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 使用 func_t 模板</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">func_t&lt;int&gt; xx_2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>名字空间的目的是分割全局共享的名字空间</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace worst {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     namespace n1 {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     namespace n2{}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     using namespcace n1; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     using namespcace n2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>内联的名字空间允许程序员在父名字空间定义或特化子名字空间的模板</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="类"></a>类<a class="hash-link" href="#类" title="Direct link to heading">#</a></h2><p>数据抽象和行为抽象，对象是创建的实体</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="计算机存储数据"></a>计算机存储数据<a class="hash-link" href="#计算机存储数据" title="Direct link to heading">#</a></h2><ol><li>信息存储的位置</li><li>存储的值</li><li>存储信息的类型<ul><li>决定数据对象所占的内存</li><li>决定如何解释内存中的位</li><li>决定可使用的操作或方法</li></ul></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="输入输出"></a>输入输出<a class="hash-link" href="#输入输出" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="endl：控制符"></a><code>endl</code>：控制符<a class="hash-link" href="#endl：控制符" title="Direct link to heading">#</a></h4><p>endl保证程序继续运行前刷新输出（立即显示，刷新缓存）
endl:插入换行符到输出序列 os 并冲入它，如同调用 os.put(os.widen(&#x27;\n&#x27;)) 后随 os.flush() </p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="n：换行符"></a><code>\n</code>：换行符<a class="hash-link" href="#n：换行符" title="Direct link to heading">#</a></h4><ol><li>stdio 格式化数据</li><li>iostream 流式数据</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="参数void"></a>参数void<a class="hash-link" href="#参数void" title="Direct link to heading">#</a></h2><ol><li>c++中(空)与(void)等效，不接受任何参数</li><li>c中(空)，对是否接受参数沉默</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="类型"></a>类型<a class="hash-link" href="#类型" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="类型大小"></a>类型大小<a class="hash-link" href="#类型大小" title="Direct link to heading">#</a></h3><p>short至少16位， int至少和short等大
long至少32位，long至少和int等大</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="typedef：类型别名"></a><code>typedef</code>：类型别名<a class="hash-link" href="#typedef：类型别名" title="Direct link to heading">#</a></h3><p>为已有类型建立新名称，而不是建立新类型</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="eof：文件末尾"></a><code>EOF</code>：文件末尾<a class="hash-link" href="#eof：文件末尾" title="Direct link to heading">#</a></h3><ol><li><code>~scanf</code></li><li><code>scanf != EOF</code></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="确定常量类型"></a>确定常量类型<a class="hash-link" href="#确定常量类型" title="Direct link to heading">#</a></h3><ol><li>整型常量
默认为int，除非有后缀或值太大
后缀 l或L long u或U unsigned int</li><li>浮点常量
默认为double
后缀 f或F float 2.2L long double 2.3E10 double</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="浮点数"></a>浮点数<a class="hash-link" href="#浮点数" title="Direct link to heading">#</a></h3><blockquote><p>浮点：小数点可移</p></blockquote><ol><li>小数点表示法</li><li>E或e表示法
d.dddE+n小数点右移n位
-n小数点左移n位</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="整型库"></a>整型库<a class="hash-link" href="#整型库" title="Direct link to heading">#</a></h3><p>​	<code>inttypes</code> 例如<code>int64_t</code>
​	<code>climtis</code>包含整型限制信息， 如<code>INT_MAX </code>  <code>INT_MIN</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cctype库"></a><code>cctype</code>库<a class="hash-link" href="#cctype库" title="Direct link to heading">#</a></h3><p>isalnum 字母或数字
isalpha 字母
isdigit 数字</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="整型字面值"></a>整型字面值<a class="hash-link" href="#整型字面值" title="Direct link to heading">#</a></h2><table><thead><tr><th>第一位</th><th>第二位</th><th>system</th></tr></thead><tbody><tr><td>1~9</td><td></td><td>十进制 binary</td></tr><tr><td>0</td><td></td><td>八进制 octal</td></tr><tr><td>0</td><td>x或X</td><td>十六进制 hexadecimal</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="算术运算符"></a>算术运算符<a class="hash-link" href="#算术运算符" title="Direct link to heading">#</a></h2><ol><li><p><code>% </code>满足：a%b = a - (a/b)*b</p></li><li><p><code>/  </code> 有一个操作数为浮点，结果为浮点</p></li><li><p><code>++和--</code> </p><ul><li>对于类而言：前缀是将值加1然后放回结果</li><li>后缀首先复制一个副本，将其加1然后将复制的副本返回,对于用户定义的类型，前缀效率更高</li></ul></li><li><p><code>，</code> 确保先计算第一个然后第二个表达式，逗号表达式的值是最后一部分的值</p></li><li><p><code>::</code> 范围解析运算符</p><ol><li><p>全局作用域符（<code>::name</code>）：用于类型名称（类、类成员、成员函数、变量等）前，表示作用域为全局命名空间</p></li><li><p>类作用域符（<code>class::name</code>）：用于表示指定类型的作用域范围是具体某个类的</p></li><li><p>命名空间作用域符（<code>namespace::name</code>）:用于表示指定类型的作用域范围是具体某个命名空间的</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">int count = 11;         // 全局（::）的 count</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class A {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    static int count;   // 类 A 的 count（A::count）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int A::count = 21;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li></ol></li></ol><p>​		</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="类型转换"></a>类型转换<a class="hash-link" href="#类型转换" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="初始化和赋值时转换"></a>初始化和赋值时转换<a class="hash-link" href="#初始化和赋值时转换" title="Direct link to heading">#</a></h3><p>隐式数值转换 可能造成结果不确定			 </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="列表初始化：初始化"></a>列表初始化：{}初始化<a class="hash-link" href="#列表初始化：初始化" title="Direct link to heading">#</a></h3><ol><li>不允许缩窄</li><li>initializer_list 列表初始化
用花括号初始化器列表初始化一个对象，其中对应构造函数接受一个 <code>std::initializer_list</code> 参数.</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include &lt;initializer_list&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">template &lt;class T&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct S {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    std::vector&lt;T&gt; v;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    S(std::initializer_list&lt;T&gt; l) : v(l) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         std::cout &lt;&lt; &quot;constructed with a &quot; &lt;&lt; l.size() &lt;&lt; &quot;-element list\n&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    void append(std::initializer_list&lt;T&gt; l) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        v.insert(v.end(), l.begin(), l.end());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">for (int x : {-1, -2, -3}) // auto 的规则令此带范围 for 工作</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        std::cout &lt;&lt; x &lt;&lt; &#x27; &#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">vector&lt;int&gt; func() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return {3,5};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//返回一个初始化列表，通常会导致构造一个临时变量</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const vector&lt;int&gt; &amp;func() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return {3, 5};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//如果返回值是一个引用类型的话，则会返回一个临时变量的引用</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//必须要加const限制符,该规则与返回一个字面常量是一样的</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="表达式转换"></a>表达式转换<a class="hash-link" href="#表达式转换" title="Direct link to heading">#</a></h3><p>整形提升</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="传参时的转换"></a>传参时的转换<a class="hash-link" href="#传参时的转换" title="Direct link to heading">#</a></h3><p>由函数原型控制，也可取消。取消时会对char，short整形提升，float提升为double</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="强制类型转换"></a>强制类型转换<a class="hash-link" href="#强制类型转换" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(typename) value C语言</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">typename (value) c++支持，表现的像函数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">强制类型转换运算符</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">static_cast&lt;&gt;等4个</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="指针数组字符串"></a>指针数组字符串<a class="hash-link" href="#指针数组字符串" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="数组"></a>数组<a class="hash-link" href="#数组" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">初始化</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {}：对部分元素初始化，其他元素则设置为0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//自动计数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int array[] = {1,2,3,4};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cnt = sizeof(array) / sizeof(int);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int arr[10]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">arr = &amp;arr[0] 是第一个元素的地址</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&amp;arr 是整个数组的地址</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&amp;arr + 1 = arr + 10 + 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int (*ptr)[10] = &amp;arr</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">*ptr = arr</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ptr = &amp;arr</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="指针"></a>指针<a class="hash-link" href="#指针" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">空指针</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    C语言宏NULL：0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            0可用做地址和整型</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    nullptr(c++11)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>*运算符被称为间接值或解除引用运算符
指针不是整型，即使计算机通常把地址当做整型处理</p><p>静态联编和动态联编</p><ol><li>编译时给数组分配内存，指定长度</li><li>运行时创建，动态数组。new分配空间</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="指针和数组"></a>指针和数组<a class="hash-link" href="#指针和数组" title="Direct link to heading">#</a></h3><p>指针和数组基本等价在于指针运算和c++内部处理数组的方式
指针的值可修改，数组名是变量</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sizeof(array) = 数组长度</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sizeof(ptr) = 指针长度</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sizeof((Class *)0-&gt;member); //技巧:强制转换0为一个Class类的指针，继而通过指针的解引用获得其成员变量，并用sizeof求得该成员变量的大小</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sizeof(Class::member);(C++11)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>当且仅当在函数头和函数原型中<code>int *arr</code> 与<code>int arr[]</code>含义相同。表示arr是一个int指针，在其他上下文两者不同
<code>int arr[] </code>表示arr不仅指向一个int类型，还指向数组的一个元素</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="字符串"></a>字符串<a class="hash-link" href="#字符串" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">初始化</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    数组初始化，则末尾元素为‘\0&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;&quot;初始化，隐式包含空字符</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>字符串常量(字符串字面值)，表示字符串第一个祖父所在的内存地址
<code>char *</code>，<code>char []</code>也是，c++不保证字符串字面值被唯一存储</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="结构"></a>结构<a class="hash-link" href="#结构" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="对齐"></a>对齐<a class="hash-link" href="#对齐" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #pragma pack(n)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">设定结构体、联合以及类成员变量以 n 字节方式对齐</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #pragma pack(push)  // 保存对齐状态</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#pragma pack(4)     // 设定为 4 字节对齐</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct test</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    char m1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    double m4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int m3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#pragma pack(pop)   // 恢复对齐状态</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="struct结构体"></a><code>struct</code>结构体<a class="hash-link" href="#struct结构体" title="Direct link to heading">#</a></h3><p>​	<code>struct</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="union共用体"></a><code>union</code>共用体<a class="hash-link" href="#union共用体" title="Direct link to heading">#</a></h3><p><strong>限制</strong></p><ol><li>默认访问控制符为 public</li><li>可以含有构造函数、析构函数</li><li>不能含有引用类型的成员</li><li>不能继承自其他类，不能作为基类</li><li>不能含有虚函数</li><li>匿名 union 在定义所在作用域可直接访问 union 成员</li><li>匿名 union 不能包含 protected 成员或 private 成员</li><li>全局匿名联合必须是静态（static）的</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">union UnionTest {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    UnionTest() : i(10) {};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int i;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    double d;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">static union {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int i;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    double d;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int main() {  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    UnionTest u;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    union {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        int i;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        double d;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    std::cout &lt;&lt; u.i &lt;&lt; std::endl;  // 输出 UnionTest 联合的 10</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::i = 20;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    std::cout &lt;&lt; ::i &lt;&lt; std::endl;  // 输出全局静态匿名联合的 20</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    i = 30;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    std::cout &lt;&lt; i &lt;&lt; std::endl;    // 输出局部匿名联合的 30</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>C++11:何非引用类型都可以成为联合体的数据成员，这样的联合体即所谓的非受限联合体（Unrestricted Union）</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="enum枚举"></a><code>enum</code>枚举<a class="hash-link" href="#enum枚举" title="Direct link to heading">#</a></h3><p>类中可替代const，常见符号常量</p><p>显示设置枚举值,只能为整数，未被初始化默认比前面加+1，默认从0开始。<code>enum  bits {zero one , nine = 9, ten};</code></p><p><strong>设定</strong>
具名的enum类型的名字，以及enum的成员的名字都是全局可见的。这与C++中具名的namespace、class/struct及union必须通过“名字::成员名”的方式访问相比是格格不入的（namespace等被称为强作用域类型，而enum则是非强作用域类型）</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="限定作用域的枚举类型或叫强类型枚举"></a><strong>限定作用域的枚举类型或叫强类型枚举</strong><a class="hash-link" href="#限定作用域的枚举类型或叫强类型枚举" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    enum class Color : int { red, green = 20, blue };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Color r = Color::blue;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">switch(r)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    case Color::red  : std::cout &lt;&lt; &quot;red\n&quot;;   break;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    case Color::green: std::cout &lt;&lt; &quot;green\n&quot;; break;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    case Color::blue : std::cout &lt;&lt; &quot;blue\n&quot;;  break;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// int n = r; // 错误：不存在从有作用域枚举到 int 的转换</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int n = static_cast&lt;int&gt;(r); // OK, n = 21</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="不限定作用域的枚举类型"></a><strong>不限定作用域的枚举类型</strong><a class="hash-link" href="#不限定作用域的枚举类型" title="Direct link to heading">#</a></h4><p>​	无作用域枚举类型的值可隐式转换为整型类型</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">enum color { red, yellow, green };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">enum { floatPrec = 6, doublePrec = 10 };</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="强类型作用域"></a><strong>强类型作用域</strong><a class="hash-link" href="#强类型作用域" title="Direct link to heading">#</a></h4><ol><li>强作用域
限定作用域用于解决重名
强类型枚举成员的名称不会被输出到其父作用域空间</li><li>转换限制
强类型枚举成员的值不可以与整型隐式地相互转换</li><li>可以指定底层类型
强类型枚举默认的底层类型为int,但也可以显式地指定底层类型，具体方法为在枚举名称后面加上“：type</li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="检查枚举是否完备"></a><strong>检查枚举是否完备</strong><a class="hash-link" href="#检查枚举是否完备" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define assert_static(expr) \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    do {enum {assert_static__ = 1 / (expr)}; } while (0)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">enum FeatureSupports {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    One   = 0x00001,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Two   = 0x00002,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Three = 0x00004,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    MAX   = 0x00010,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int main() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    //检查枚举值的完备性</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    assert_static((MAX - 1) == (One | Two | Three));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="函数"></a>函数<a class="hash-link" href="#函数" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="函数-1"></a>函数<a class="hash-link" href="#函数-1" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="规则"></a>规则<a class="hash-link" href="#规则" title="Direct link to heading">#</a></h3><p>函数不能直接返回数组，却可以把数组当做结构或对象的组成部分
结构变量和数组都可以存储多个数据项，但结构变量行为更接近于基本的单值变量
函数指针 :<code>typedef returnType (*ptr)(arg...);</code></p><p>单定义规则：所有非内联函数只可以在一个文件中包含函数定义，同一内联函数所有定义相同</p><p>所有函数静态存储；默认外部链接：可在文件间共享，static可设为内部；静态函数覆盖外部定义</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="函数的执行"></a>函数的执行<a class="hash-link" href="#函数的执行" title="Direct link to heading">#</a></h3><p>函数调用后立即存储该指令的内存地址，并将参数参数复制到堆栈(保留的内存块)，跳到标记函数起点的内存单元，执行函数代码（也需需要保存返回值到寄存器），然后跳回到原来被保存的指令处</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="查找函数"></a>查找函数<a class="hash-link" href="#查找函数" title="Direct link to heading">#</a></h3><p>若该函数原型指出函数是静态的（static），则只在该文件查找函数定义。否则在所有程序（包括链接程序）中查找函数定义。未找到则在库中搜索。</p><p>定义一个与库函数同名的函数，程序员定义的版本将覆盖库函数</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="inline内联函数"></a><code>inline</code>内联函数<a class="hash-link" href="#inline内联函数" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="特征"></a>特征<a class="hash-link" href="#特征" title="Direct link to heading">#</a></h3><p>相当于把内联函数里面的内容写在调用内联函数处,内联函数同宏函数一样将在被调用处进行代码展开,省去了参数压栈/栈帧开辟与回收,结果返回等.从而提高程序运行速度,会做安全检查或自动类型转换（同普通函数）却比宏多了类型检查，真正具有函数特性；</p><p>编译器一般不内联包含循环、递归、switch 等复杂操作的内联函数；</p><p>在类声明中定义的函数，除了虚函数的其他函数都会自动隐式地当成内联函数。</p><p>内联函数可以访问类的成员变量，宏定义则不能。
由编译器决定是否内联</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="使用"></a>使用<a class="hash-link" href="#使用" title="Direct link to heading">#</a></h3><p>函数定义或声明时：<code>inline int functionName(int first,...);</code>
一般定义时使用</p><p>可将内联函数定义放在头文件，c++要求就同一函数的所有内联定义必须相同</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="步骤"></a>步骤<a class="hash-link" href="#步骤" title="Direct link to heading">#</a></h3><ol><li>将 inline 函数体复制到 inline 函数调用点处；</li><li>为所用 inline 函数中的局部变量分配内存空间；</li><li>将 inline 函数的的输入参数和返回值映射到调用方法的局部变量空间中； </li><li>如果 inline 函数有多个返回点,将其转变为 inline 函数代码块末尾的分支(使用 GOTO)</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="缺点"></a>缺点<a class="hash-link" href="#缺点" title="Direct link to heading">#</a></h3><ol><li>代码膨胀。内联是以代码膨胀（复制）为代价，消除函数调用带来的开销。消耗更多的内存空间。</li><li>inline 函数无法随着函数库升级而升级。inline函数的改变需要重新编译，不像 non-inline 可以直接链接。</li><li>是否内联，程序员不可控。内联函数只是对编译器的建议，是否对函数内联，决定权在于编译器。</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="引用"></a>引用&amp;<a class="hash-link" href="#引用" title="Direct link to heading">#</a></h2><p>引用是变量的别名
必须在声明引用变量时进行初始化</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="返回引用"></a>返回引用<a class="hash-link" href="#返回引用" title="Direct link to heading">#</a></h3><p>注意引用对象不可是临时变量</p><ol><li>返回函数参数中的引用</li><li>new来分配新空间</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="函数默认参数"></a>函数默认参数<a class="hash-link" href="#函数默认参数" title="Direct link to heading">#</a></h2><p>从右向左添加默认值</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="函数重载（函数多态）"></a>函数重载（函数多态）<a class="hash-link" href="#函数重载（函数多态）" title="Direct link to heading">#</a></h2><p>函数特征标：函数的参数列表</p><ol><li>参数的数目，类型，排列顺序</li><li>类型引用和类型本身为统一特征标</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">int func(int x); int func(int &amp;x);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">void func(char *bits);    //overload</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">void func(const char *bits); //overload   </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>C++跟踪每一个重载函数通过名称修饰：根据名称类型对函数名加密，根据编译器</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="内存模型"></a>内存模型<a class="hash-link" href="#内存模型" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="存储持续性"></a>存储持续性<a class="hash-link" href="#存储持续性" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="自动存储"></a>自动存储<a class="hash-link" href="#自动存储" title="Direct link to heading">#</a></h3><p>局部变量，函数参数等
栈：两个指针（栈底和栈顶）根据栈，</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="静态存储"></a>静态存储<a class="hash-link" href="#静态存储" title="Direct link to heading">#</a></h3><p>static定义的变量，以及全局变量</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="动态存储"></a>动态存储<a class="hash-link" href="#动态存储" title="Direct link to heading">#</a></h3><p>自由存储或堆</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="线程存储（c11）"></a>线程存储（C++11）<a class="hash-link" href="#线程存储（c11）" title="Direct link to heading">#</a></h3><p>thread_local声明，生命周期与所属线程一样长</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="作用域"></a>作用域<a class="hash-link" href="#作用域" title="Direct link to heading">#</a></h3><p>同名变量（一个外部代码块，一个内部）隐藏</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="链接性"></a>链接性<a class="hash-link" href="#链接性" title="Direct link to heading">#</a></h3><p>外部链接性：可在其他文件访问
内部链接性：只能在当前文件访问
无链接性：只能在当前函数或代码块访问</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="extern"></a><code>extern</code><a class="hash-link" href="#extern" title="Direct link to heading">#</a></h3><p>外部:被 extern 限定的函数或变量是 extern 类型的</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="exrten-c"></a><code>exrten “C”</code><a class="hash-link" href="#exrten-c" title="Direct link to heading">#</a></h3><p>被 <code>extern &quot;C&quot;</code> 修饰的变量和函数是按照 C 语言方式编译和链接的</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#ifdef __cplusplus</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">extern &quot;C&quot; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#endif</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">void *memset(void *, int, size_t);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#ifdef __cplusplus</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#endif</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><code>extern &quot;C&quot;</code> 的作用是让 C++ 编译器将 <code>extern &quot;C&quot;</code> 声明的代码当作 C 语言代码处理，可以避免 C++ 因符号修饰导致代码不能和C语言库中的符号进行链接的问题。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="__cplusplus"></a>__cplusplus<a class="hash-link" href="#__cplusplus" title="Direct link to heading">#</a></h3><p><code>__cplusplus</code>这个宏只有“被定义了”和“未定义”两种状态。事实上却并非如此，<code>__cplusplus</code>这个宏通常被定义为一个整型值,_一般会是一个比以往标准中更大的值</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">if</span><span class="token macro property"> </span><span class="token macro property expression">__cplusplus </span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token macro property expression"> </span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">201103L</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">error</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&quot;should use C++11 implementatinon&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">enif</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="static"></a>static<a class="hash-link" href="#static" title="Direct link to heading">#</a></h2><ol><li>修饰普通变量，修改变量的存储区域和生命周期，使变量存储在静态区，在 main 函数运行前就分配了空间.
如果有初始值就用初始值初始化它，如果没有初始值系统用默认值初始化它。</li><li>修饰普通函数，表明函数的作用范围，仅在定义该函数的文件内才能使用。
为了防止与他人命名空间里的函数重名，可以将函数定为 static。</li><li>修饰成员变量，类成员</li><li>修饰成员函数，类方法只能访问类成员,无this指针。</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="const"></a>const<a class="hash-link" href="#const" title="Direct link to heading">#</a></h2><p><code>const</code>修饰的全局变量的链接性为内部；保证了每个文字使用自己的一组常量，而非所有文件共享一组
<code>const int var = 10;</code> 相当于 <code>static const int var = 10;</code>
若定义为外部，则可<code>extern const int state = 10; </code>但只可以在一个文件初始化</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="作用"></a>作用<a class="hash-link" href="#作用" title="Direct link to heading">#</a></h3><ol><li>修饰变量，说明该变量不可以被改变；</li><li>修饰指针，分为指向常量的指针（pointer to const）和自身是常量的指针（常量指针，const pointer）；</li><li>修饰引用，指向常量的引用（reference to const），用于形参类型，即避免了拷贝，又避免了函数对值的修改；没有 const reference，因为引用本身就是 const pointer</li><li>修饰成员函数，说明该成员函数内不能修改成员变量。</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 类</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">A</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">private</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 常对象成员，只能在初始化列表赋值</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 构造函数</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">A</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">A</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 初始化列表</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// const可用于对重载函数的区分</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">             </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 普通成员函数</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 常成员函数，不得修改类中的任何数据成员的值</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 对象</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    A b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">               </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 普通对象，可以调用全部成员函数、更新常成员变量</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> A a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 常对象，只能调用常成员函数</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> A </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">p </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 指针变量，指向常对象</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> A </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">q </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 指向常对象的引用</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 指针</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> greeting</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">char</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> p1 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> greeting</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">                </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 指针变量，指向字符数组变量</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> p2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> greeting</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 指针变量，指向字符数组常量(const 后面是 char，说明指向的字符(char)不可改变)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">char</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> p3 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> greeting</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 自身是常量的指针，指向字符数组变量(const 后面是 p3，说明 p3 指针自身不可改变)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> p4 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> greeting</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 自身是常量的指针，指向字符数组常量</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//函数</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">function1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> Var</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">           </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 传递过来的参数在函数内不可变</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">function2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> Var</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 参数指针所指内容为常量</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">function3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">char</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> Var</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 参数指针为常量</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">function4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> Var</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">          </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 引用参数在函数内为常量</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 函数返回值</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">function5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 返回一个常数</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">function6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 返回一个指向常量的指针变量，使用：const int *p = function6();</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">function7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 返回一个指向变量的常指针，使用：int* const p = function7();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="volatile"></a>volatile<a class="hash-link" href="#volatile" title="Direct link to heading">#</a></h2><p><code>volatile</code> 关键字是一种类型修饰符，用它声明的类型变量表示可以被某些编译器未知的因素（操作系统、硬件、其它线程等）更改。所以使用 <code>volatile</code> 告诉编译器不应对这样的对象进行优化。</p><p><code>volatile</code> 关键字声明的变量，每次访问时都必须从内存中取出值（没有被 <code>volatile</code> 修饰的变量，可能由于编译器的优化，从 CPU 寄存器中取值）
<code>const</code> 可以是 <code>volatile</code> （如只读的状态寄存器）
指针可以是<code> volatile</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="new和delete"></a>new和delete<a class="hash-link" href="#new和delete" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="使用-1"></a>使用<a class="hash-link" href="#使用-1" title="Direct link to heading">#</a></h3><ol><li><code>new</code>和<code>delete</code>成对出现，而且new分配的内存只可用<code>delete</code>，同样<code>delete</code>也应只释放new分配的内存</li><li><code>new[]</code>和<code>delete[]</code>成对</li><li>空指针使用<code>delete</code>是安全的</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="作用-1"></a>作用<a class="hash-link" href="#作用-1" title="Direct link to heading">#</a></h3><ol><li>new / new[]：完成两件事，先底层调用 malloc 分配了内存，然后调用构造函数（创建对象）</li><li>delete/delete[]：也完成两件事，先调用析构函数（清理资源），然后底层调用 free 释放空间</li><li>new 在申请内存时会自动计算所需字节数，而 malloc 则需我们自己输入申请内存空间的字节数
new分配失败引发异常：std::bad_alloc</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="new初始化"></a>new初始化<a class="hash-link" href="#new初始化" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">ar </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">pi </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">pi </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="定位new"></a>定位new<a class="hash-link" href="#定位new" title="Direct link to heading">#</a></h3><p>定位 new允许我们向 new 传递额外的地址参数，从而在预先指定的内存区域创建对象。可用于原地构造</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">place_address 是个指针</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">initializers提供一个（可能为空的）以逗号分隔的初始值列表</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">place_address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> type</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">place_address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">initializers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">place_address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> type </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">place_address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> type </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> braced initializer list </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//全局</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">p </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="delete-this"></a>delete this<a class="hash-link" href="#delete-this" title="Direct link to heading">#</a></h2><p>须保证 this 对象是通过 new(不是 new[]、不是 placement new、不是栈上、不是全局、不是其他对象成员)分配的
必须保证 delete this后不在调用this以及相关成员函数</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="原地构造"></a>原地构造<a class="hash-link" href="#原地构造" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token class-name" style="color:rgb(255, 203, 107)">vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">vector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">__capacity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">__size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">nullptr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">T </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token function" style="color:rgb(130, 170, 255)">malloc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">T</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> __capacity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token class-name" style="color:rgb(255, 203, 107)">vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">vector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     __size </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">__size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     __capacity</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">__capacity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">T </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token function" style="color:rgb(130, 170, 255)">malloc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">T</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> __size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> __size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//data[i] = v.data[i];</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//原地构造</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token function" style="color:rgb(130, 170, 255)">T</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="限定对象的存储区"></a>限定对象的存储区<a class="hash-link" href="#限定对象的存储区" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="只能在堆上"></a>只能在堆上<a class="hash-link" href="#只能在堆上" title="Direct link to heading">#</a></h3><p>将析构函数设置为私有或delete
C++ 是静态绑定语言，编译器管理栈上对象的生命周期，编译器在为类对象分配栈空间时，会先检查类的析构函数的访问性。若析构函数不可访问，则不能在栈上创建对象。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="只能在栈上"></a>只能在栈上<a class="hash-link" href="#只能在栈上" title="Direct link to heading">#</a></h3><p>将 new 和 delete 重载为私有
在堆上生成对象，使用 new 关键词操作</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="面向对象"></a>面向对象<a class="hash-link" href="#面向对象" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="特征-1"></a>特征<a class="hash-link" href="#特征-1" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="封装"></a>封装<a class="hash-link" href="#封装" title="Direct link to heading">#</a></h3><p>数据隐藏</p><ol><li>public成员：可以被任意实体访问</li><li>protected成员：只允许被子类及本类的成员函数访问</li><li>private成员：只允许被本类的成员函数、友元类或友元函数访问</li><li>class默认为private，struct默认为public</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="继承"></a>继承<a class="hash-link" href="#继承" title="Direct link to heading">#</a></h3><ol><li>继承(泛化)
实现继承
可视继承</li><li>组合(聚合)
接口继承
纯虚类</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="多态"></a>多态<a class="hash-link" href="#多态" title="Direct link to heading">#</a></h3><ol><li>覆盖
虚函数
接口</li><li>重载
同名函数</li><li>类型<ol><li>重载多态（编译期）：函数重载、运算符重载</li><li>子类型多态（运行期）：虚函数</li><li>参数多态性（ 编译期）：类模板、函数模板</li><li>强制多态（编译期/运行期）：基本类型转换、自定义类型转换</li></ol></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="explicit显式"></a><code>explicit(</code>显式)<a class="hash-link" href="#explicit显式" title="Direct link to heading">#</a></h2><p>explicit 修饰构造函数时，可以防止隐式转换和复制初始化
explicit 修饰转换函数时，可以防止隐式转换，但按语境转换除外</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct A {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    A(int) { }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    operator bool() const { return true; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct B {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    explicit B(int) {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    explicit operator bool() const { return true; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">void doA(A a) {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">void doB(B b) {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return 0;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int main()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    A a1(1);        // OK：直接初始化</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    A a2 = 1;       // OK：复制初始化</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    A a3{ 1 };      // OK：直接列表初始化</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    A a4 = { 1 };       // OK：复制列表初始化</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    A a5 = (A)1;        // OK：允许 static_cast 的显式转换 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    doA(1);         // OK：允许从 int 到 A 的隐式转换</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (a1);        // OK：使用转换函数 A::operator bool() 的从 A 到 bool 的隐式转换</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bool a6（a1）;        // OK：使用转换函数的隐式转换</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bool a7 = a1;       // OK：使用转换函数 的隐式转换</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bool a8 = static_cast&lt;bool&gt;(a1);  // OK ：static_cast 进行直接初始化</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     B b1(1);       // OK：直接初始化</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    B b2 = 1;       // 错误：被 explicit 修饰构造函数的对象不可以复制初始化</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    B b3{ 1 };      // OK：直接列表初始化</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    B b4 = { 1 };   // 错误：被 explicit 修饰构造函数的对象不可以复制列表初始化</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    B b5 = (B)1;        // OK：允许 static_cast 的显式转换</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    doB(1);         // 错误：被 explicit 修饰构造函数的对象不可以从 int 到 B 的隐式转换</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (b1);        // OK：被 explicit 修饰转换函数 的按语境转换</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bool b6(b1);        // OK：被 explicit 修饰转换函数的按语境转换</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bool b7 = b1;       // 错误：被 explicit 修饰转换函数 B::operator bool() 的对象不可以隐式转换</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bool b8 = static_cast&lt;bool&gt;(b1);  // OK：static_cast 进行直接初始化</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong><code>const</code>，<code>explicit</code>等约束目的：在编译阶段出错优于在运行阶段出错</strong>`</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="封装-1"></a>封装<a class="hash-link" href="#封装-1" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="类-1"></a>类<a class="hash-link" href="#类-1" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="类对象"></a>类对象<a class="hash-link" href="#类对象" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="初始化"></a><strong>初始化</strong><a class="hash-link" href="#初始化" title="Direct link to heading">#</a></h4><p><code>Stock s = Stock(argu); </code>创建指定值的对象，可能会创建临时对象</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="赋值"></a><strong>赋值</strong><a class="hash-link" href="#赋值" title="Direct link to heading">#</a></h4><p><code>Stock s;  s = Stock(argu);</code>开辟对象数据区,匹配构造函数-&gt;匹配拷贝构造函数-&gt;完成构造</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="类成员函数"></a>类成员函数<a class="hash-link" href="#类成员函数" title="Direct link to heading">#</a></h3><p>外部定义成员函数时，使用作用域解析符(::)表示函数所属类
类方法可访问类的private数据
在类声明中定义的函数，除了虚函数，都会自动隐式地当成内联函数 ，类外需显式
初始化列表，就相当于调用构造函数,若未显式调用,则隐式调用默认构造函数</p><p>成员属性和方法,对于成员属性,谁新建,谁就销毁</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="类属性和方法"></a>类属性和方法<a class="hash-link" href="#类属性和方法" title="Direct link to heading">#</a></h3><p>static修饰成员属性和方法</p><ol><li>对于非const属性的整型，以及非constexpr属性需要类外定义，类内只是声明</li><li>静态成员的定义最后只存在于一个目标文件中</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c++"><div tabindex="0" class="prism-code language-c++ codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Class_name::static_member</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Class_name::static_func</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>静态成员函数与非静态成员函数的根本区别是：非静态成员函数有this指针，而静态成员函数没有this指针。由此决定了静态成员函数不能访问本类中的非静态成员。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="rvo返回值优化"></a>RVO返回值优化<a class="hash-link" href="#rvo返回值优化" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ClassName </span><span class="token function" style="color:rgb(130, 170, 255)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ClassName </span><span class="token function" style="color:rgb(130, 170, 255)">temp_a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;info&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> temp_a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   ClassName a </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol><li>开辟a对象数据区</li><li>调用函数func</li><li>开辟对象temp_a数据区</li><li>调用temp_a对象的构造函数</li><li>使用temp_a调用临时匿名变量的拷贝构造函数</li><li>销毁temp_a对象</li><li>使用临时匿名变量调用a的拷贝构造函数</li><li>销毁临时匿名变量</li><li>销毁a对象</li></ol><p>step3-&gt;step8：优化2:将temp_a设置为a对象的替身;调用temp_a对象的构造函数</p><p>step5-&gt;step8：优化1:使用temp_a调用a的拷贝构造函数;销毁temp_a对象</p><p>原来3个对象a,temp_a,临时匿名对象;将复制方式改为剪切,内存对临时变量进行了优化;</p><p>根据编译环境的不同优化层级不一定</p><p><code>g++ -fno-elide-constructors RVO.cpp</code>，关闭RVO</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="类的默认函数由编译器提供"></a>类的默认函数由编译器提供<a class="hash-link" href="#类的默认函数由编译器提供" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="成员函数"></a>成员函数<a class="hash-link" href="#成员函数" title="Direct link to heading">#</a></h3><ol><li><p>构造函数</p></li><li><p>拷贝构造函数 </p></li><li><p>拷贝赋值函数(operator =)</p></li><li><p>移动构造函数</p></li><li><p>移动拷贝函数</p></li><li><p>析构函数</p></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="全局默认操作符函数"></a>全局默认操作符函数<a class="hash-link" href="#全局默认操作符函数" title="Direct link to heading">#</a></h3><ol><li>operator.</li><li>operator &amp;</li><li>operator &amp;&amp;</li><li>operator </li><li>*operator -&gt;</li><li>operator -&gt;*</li><li>operator new</li><li>operator delete</li></ol><p>一旦程序员实现了这些函数的自定义版本，则编译器不会再为该类自动生成默认版本
在C++11中，如果用户已经声明了一个拷贝复制操作符或者一个析构函数，那么编译器不会隐式声明一个拷贝构造函数.
同样，如果用户已经声明了一个拷贝构造函数或者析构函数，编译器则不会隐式地声明一个拷贝复制操作符</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">Class</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">Class</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>前者非POD,编译器失去了优化这样简单的数据类型的可能</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="特殊成员函数"></a>特殊成员函数<a class="hash-link" href="#特殊成员函数" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="默认构造函数"></a>默认构造函数<a class="hash-link" href="#默认构造函数" title="Direct link to heading">#</a></h2><p>先构造属性在构造类
零参(缺省)构造函数
<code>Class_name::Class_name() : mem(显示) </code>调用默认构造函数 {}</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="default关键字"></a>default关键字<a class="hash-link" href="#default关键字" title="Direct link to heading">#</a></h2><ol><li>解决对于创建未初始化的对象的二义性</li><li>由编译器生成一个缺省的构造函数
如果类的某个成员变量的类型不存在缺省构造函数，那编译器就没有办法生成一个缺省构造函数，即使强行指定=default，它的意思也是“生成一个缺省的=delete”</li><li>局限于成员函数</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="delete关键字"></a>delete关键字<a class="hash-link" href="#delete关键字" title="Direct link to heading">#</a></h2><p>delete修饰的函数为删除（deleted）函数
可用于成员函数和普通函数</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="默认析构函数"></a>默认析构函数<a class="hash-link" href="#默认析构函数" title="Direct link to heading">#</a></h2><p><code>~Class_name::Class_name() {}</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="赋值运算符重载函数"></a>赋值运算符重载函数<a class="hash-link" href="#赋值运算符重载函数" title="Direct link to heading">#</a></h2><p><code>Class_name&amp; Classname::operator=(const Class_name &amp;);</code>
对已有对象赋值给另一对象：<code>Stock init(argu); Stock s;  s = init;</code>初始化对象时不一定
避免对同一对象进行赋值操作：<code>if (this == &amp;add) return *this;</code>
默认功能，逐个复制非静态成员（浅复制），复制成员的值</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="地址运算符"></a>地址运算符<a class="hash-link" href="#地址运算符" title="Direct link to heading">#</a></h2><p>默认功能，返回this指针的值</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="默认拷贝构造函数"></a>默认拷贝构造函数<a class="hash-link" href="#默认拷贝构造函数" title="Direct link to heading">#</a></h2><p><code>Class_name(const Class_name &amp;);</code>
<code>const &amp;</code> </p><ol><li>如果传值会重复调用拷贝构造,所以要使用引用</li><li>const &amp;可以接收右值和左值</li></ol><p>功能，逐个复制非静态成员（浅复制），复制成员的值</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="移动赋值运算符c11"></a>移动赋值运算符(C++11)<a class="hash-link" href="#移动赋值运算符c11" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="拷贝、移动构造函数"></a>拷贝、移动构造函数<a class="hash-link" href="#拷贝、移动构造函数" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">T </span><span class="token function" style="color:rgb(130, 170, 255)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">T </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">T </span><span class="token function" style="color:rgb(130, 170, 255)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> T </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">T </span><span class="token function" style="color:rgb(130, 170, 255)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">T </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">是</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="构造函数"></a>构造函数<a class="hash-link" href="#构造函数" title="Direct link to heading">#</a></h2><p>创建未初始化的对象 <code>Stock s;</code></p><ol><li>为构造函数所有参数提供默认值</li><li>函数重载一个没有参数的构造函数</li></ol><p><code>Class_name::Class_name A = 2;</code>，初始化时调用构造函数
<code>A = 3;</code>，默认是调用构造函数,如果对operator=重载,调用重载
转换构造函数(参数个数为1的构造函数)</p><ol><li>普通转换构造函数的应用</li><li>函数传值过程中的转换构造函数的应用</li><li>explicit</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="析构函数"></a>析构函数<a class="hash-link" href="#析构函数" title="Direct link to heading">#</a></h2><p>创建对象前，c++会检测是否可以析构
析构函数写成 private ，或者写成 =delete，那么这个类就不能被继承了，因为⼦类的析构函数⽆法调⽤⽗类的析构函数，同样也无法在栈上构造对象</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="不应显式调用，应由系统调用"></a>不应显式调用，应由系统调用<a class="hash-link" href="#不应显式调用，应由系统调用" title="Direct link to heading">#</a></h3><ol><li>需要资源回收的时候调用</li><li>静态存储类对象，程序结束时调用</li><li>自动存储类对象，程序执行玩对应代码块（其定义）时</li><li>通过new创建的对象，delete时</li><li>程序创建临时对象完成特定操作，结束对该对象的使用时</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">栈区</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    A a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    A b </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    A </span><span class="token function" style="color:rgb(130, 170, 255)">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">c依次调用构造函数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">a依次调用构造函数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">栈底     栈顶</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">a     b   c</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">在栈空间依次出栈</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">全局静态区</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">A aa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">A </span><span class="token function" style="color:rgb(130, 170, 255)">bb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">aa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">A </span><span class="token function" style="color:rgb(130, 170, 255)">cc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">bb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>构造顺序一定与析构顺序相反</strong>。因为后面的构造的可能依赖于前面的信息;信息的依赖关系</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="拷贝构造函数"></a>拷贝构造函数<a class="hash-link" href="#拷贝构造函数" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Class_name ditto </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> motoo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Class_name ditto </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Class_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">motoot</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">可能通过复制构造函数直接创建，也可能生成一个临时对象，再赋值给ditto</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">复制构造函数：将新对象初始化为一个同类对象，初始化一个匿名对象，并将新对象地址赋值给ptr</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Class_name </span><span class="token function" style="color:rgb(130, 170, 255)">ditto</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">motoo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Class_name </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">ptr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Class_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">motoo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>程序生成对象副本时：函数按值传递或函数返回对象时调用，生成临时对象时</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="注意"></a>注意<a class="hash-link" href="#注意" title="Direct link to heading">#</a></h2><p><strong>系统的拷贝构造函数和构造函数不同，该函数不可重载；析构函数不可重载</strong></p><p><strong>赋值操作运算符重载函数，其default和delete型和拷贝函数一致</strong></p><p><strong>拷贝操作保留源对象，移动操作可修改源对象，还可能转让所有权，而不做任何复制</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="继承基类成员函数"></a>继承基类成员函数<a class="hash-link" href="#继承基类成员函数" title="Direct link to heading">#</a></h2><p>子类可以通过使用using声明来声明继承基类的构造函数
<code>using Base::func</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="继承构造函数"></a>继承构造函数<a class="hash-link" href="#继承构造函数" title="Direct link to heading">#</a></h2><p><code>using Base::Base</code>
有的时候，基类构造函数的参数会有默认值。对于继承构造函数来讲，参数的默认值是不会被继承的。事实上，默认值会导致基类产生多个构造函数的版本，这些函数版本都会被派生类继承。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="多继承情况"></a>多继承情况<a class="hash-link" href="#多继承情况" title="Direct link to heading">#</a></h2><p>通过显式定义继承类的冲突的构造函数，阻止隐式生成相应的继承构造函数来解决冲突。
如果一旦使用了继承构造函数，编译器就不会再为派生类生成默认构造函数</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="委派构造函数"></a>委派构造函数<a class="hash-link" href="#委派构造函数" title="Direct link to heading">#</a></h2><p>原则上，编译器不允许在构造函数中调用构造函数
委派构造的一个很实际的应用就是使用构造模板函数产生目标构造函数</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">TDConstructed</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">TDConstructed</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">short</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">TDConstructed</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">begin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">end</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">TDConstructed</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">deque</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token function" style="color:rgb(130, 170, 255)">TDConstructed</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">begin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">end</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">private</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">TDConstructed</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">T first</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> T last</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">l</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">first</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> last</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    list</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> l</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="三五法则，"></a>三/五法则，<a class="hash-link" href="#三五法则，" title="Direct link to heading">#</a></h2><p>拷贝构造，
拷贝赋值函数，
析构函数</p><ol><li><p>需要析构函数的类也需要拷贝构造函数和拷贝赋值函数，深拷贝</p></li><li><p>需要拷贝操作的类也需要赋值操作，反之亦然。</p></li><li><p>析构函数不能是删除的</p><ol><li>不能定义局部变量：delete析构函数、private 析构函数</li><li>可以<code>newA :*p = new A(); </code>不可以delete</li></ol></li><li><p>如果一个类成员有删除的或不可访问的析构函数，那么其默认和拷贝构造函数会被定义为删除的</p></li><li><p>如果一个类有const或引用成员，则不能使用合成的拷贝赋值操作。（无法默认构造的const成员的类 则该类就无默认构造函数）</p><ol><li>只能使用初始化列表的方式</li><li>函数内部并不是严格的初始化，初始化是构造函数；
初始化列表是调用相关成员的构造函数，能用初始化列表，绝不在内部实现；函数内部应是逻辑代码</li></ol></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="成员初始化列表"></a>成员初始化列表<a class="hash-link" href="#成员初始化列表" title="Direct link to heading">#</a></h2><p>按着类声明顺序构造而非列表顺序，构造和赋值（先构造在赋值）不一样。少了一次调用默认构造函数的过程</p><ol><li>常量成员，因为常量只能初始化不能赋值，所以必须放在初始化列表里面</li><li>引用类型，引用必须在定义的时候初始化，并且不能重新赋值，所以也要写在初始化列表里面</li><li>没有默认构造函数的类类型，因为使用初始化列表可以不必调用默认构造函数来初始化</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="深浅拷贝"></a>深浅拷贝<a class="hash-link" href="#深浅拷贝" title="Direct link to heading">#</a></h2><p>浅拷贝:拷贝的是对象的地址而不是对象的值
深拷贝:新建空间进行对象的整体拷贝
修改拷贝值是否会更改原值：是：浅；否：深
如果是拷贝构造，会定义成深拷贝;浅拷贝，不要创建对象，只做指针的引用</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="返回对象"></a>返回对象<a class="hash-link" href="#返回对象" title="Direct link to heading">#</a></h2><ol><li>返回指向const对象的引用，
返回对象调用拷贝构造函数，返回引用不会引用指向的对象应存在
参数为const，返回参数，其返回类型也应是const</li><li>返回非const对象的引用
operator=()的返回值用于连续赋值：提高效率 s3 = s2 = s1;
operator&lt;&lt;()的返回值用于串接输出：必须这样做</li><li>返回对象</li><li>返回const对象，检错</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="就地初始化"></a>就地初始化<a class="hash-link" href="#就地初始化" title="Direct link to heading">#</a></h2><p>类内就地初始化与构造函数中用成员初始化</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Name</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> val </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token class-name" style="color:rgb(255, 203, 107)">Name</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">Name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">val</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>在C++11中,允许使用等号=或者花括号{}进行就地的非静态成员变量初始化</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="限制"></a>限制<a class="hash-link" href="#限制" title="Direct link to heading">#</a></h3><ol><li><p>需要初始化的数据为公有性访问</p></li><li><p>不要显式定义默认的构造函数，
TIPS：上述两点在于保证其就地初始化的“数据性”</p></li><li><p>定义与其匹配的构造函数</p></li><li><p>就地圆括号式的表达式列表初始化非静态成员导致编译出错</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">A</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">A</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">val</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> val</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">init</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    A x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//ok</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    A z</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ok</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    A </span><span class="token function" style="color:rgb(130, 170, 255)">y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// not allow </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string </span><span class="token function" style="color:rgb(130, 170, 255)">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// not allow</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="const，static，mutable"></a>const，static，mutable<a class="hash-link" href="#const，static，mutable" title="Direct link to heading">#</a></h2><p>static 修饰的是类成员函数和类成员变量,所有的对象拿到的都是同一份类成员变量
类成员函数可以使用普通对象调用，也可以使用类调用
const 对象只能调用const函数;
const成员变量初始化必须使用初始化列表
const成员函数里不可修改成员变量的值;如果成员变量定义前加了mutable，表示成员可以在const成员函数里修改;在部分场景下，需要定义const版本和非const两个版本的函数</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="友元"></a>友元<a class="hash-link" href="#友元" title="Direct link to heading">#</a></h2><ol><li>友元关系不能被继承。 </li><li>友元关系是单向的，不具有交换性。
若类B是类A的友元，类A不一定是类B的友元,要看在类中是否有相应的声明。</li><li>友元关系不具有传递性。
若类B是类A的友元，类C是B的友元，类C不一定是类A的友元，同样要看类中是否有相应的声明</li></ol><p>友元的作用，使外部也可以访问私有成员
声明友元函数：<code> friend void showMe(SomeBody &amp;);</code>
声明为友元类 友元类里的所有成员函数都可以访问被友元的类的私有变量，<code>  friend class Friend;</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="转换函数"></a>转换函数<a class="hash-link" href="#转换函数" title="Direct link to heading">#</a></h2><p>类转换为其他类型</p><p>转换函数必须是类方法，不能指定返回类型，不能有参数
<code>operator typenaem();</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="对象数组"></a>对象数组<a class="hash-link" href="#对象数组" title="Direct link to heading">#</a></h2><p>必须有默认构造函数；使用默认构造函数穿件数组元素，然后{}中的构造函数建创建临时对象，然后复制到对应元素
<code>Stock array[4] = {Stock(1), stock(2)};</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="作用域为类的常量"></a>作用域为类的常量<a class="hash-link" href="#作用域为类的常量" title="Direct link to heading">#</a></h2><ol><li><p>枚举 <code>enum {X = 12};</code></p></li><li><p>静态</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> X </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">12</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">类内静态整型常量：</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain">只可为</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain">，</span><span class="token keyword" style="font-style:italic">char</span><span class="token plain">，</span><span class="token keyword" style="font-style:italic">long</span><span class="token plain">等整型实现就地初始化</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">constexpr</span><span class="token plain"> Type obj </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Type 任意类型</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>只是const int X = 12; 不可行；创建对象前没有存储空间</p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="类成员函数指针"></a>类成员函数指针<a class="hash-link" href="#类成员函数指针" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Class</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">Class</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">TestFunc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">typedef</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Class</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">func f </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">Class</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">TestFunc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">using</span><span class="token plain"> func </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Class</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="继承-1"></a>继承<a class="hash-link" href="#继承-1" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="继承-2"></a>继承<a class="hash-link" href="#继承-2" title="Direct link to heading">#</a></h2><p>继承的类， 对于父类当中成员函数,系统会隐式调用其默认的构造函数,如果没有，必须显示调用--&gt;成员初始化列表()</p><p>对于private继承派生类： 其父类的protected ，public相当于放在当前private下</p><p>继承只能缩减封装，不能扩充封装权限
继承权限的限制是影响下一代的
如果没有后继类，可以设置为private私有继承
如果不希望更改任何原先的成员权限，可以设置为public
如果希望数据对外部保护，内部公开，设置为protected</p><p>谁构造谁释放：在讨论继承的时候，脑⼦⾥要想的是：cat ∈ {animal}。</p><p>⾥⽒代换原则的内容只有⼀句话：⼦类的对象能够替换其基类的对象被使⽤
举 例:任何使⽤ Animal 的地⽅，我们都可以放 Cat 进去，⽽完全不扰乱程序的逻 辑。⽽且程序⾥⾯关于 Animal 的假设， Cat 都不能打破</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="继承权限"></a>继承权限<a class="hash-link" href="#继承权限" title="Direct link to heading">#</a></h2><p>影响子类对外的访问权限
public：可以被任意实体访问
protected：只允许当前类类的派生类访问
private：不允许访问
class默认为private，struct默认为public</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="继承封装"></a>继承封装<a class="hash-link" href="#继承封装" title="Direct link to heading">#</a></h2><p>private 本类当中可以访问，派生类不可访问
protected   public降为protected
public      不更改任何权限</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="基类与派生类"></a>基类与派生类<a class="hash-link" href="#基类与派生类" title="Direct link to heading">#</a></h2><p>派生类不继承构造函数，析构函数，赋值运算符，和友元</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="关系"></a>关系<a class="hash-link" href="#关系" title="Direct link to heading">#</a></h3><p>派生类对象可以使用基类的非私有方法
基类指针（引用）可以隐式类型转换指向派生类对象 virtual
继承 is-a关系：水果-苹果
作为数据成员 has-a关系：水果-午饭</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="构造"></a>构造<a class="hash-link" href="#构造" title="Direct link to heading">#</a></h2><p>创建派生类时，首先创建基类，初始列表完成</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">Cat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Animal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;cat&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">B</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">A</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">A</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">A</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">B</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">B</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">X 开辟X的数据区</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">X 执行初始化列表</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">X</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> 执行构造逻辑</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="存储区域父类属性子类属性"></a>存储区域:父类属性,子类属性<a class="hash-link" href="#存储区域父类属性子类属性" title="Direct link to heading">#</a></h3><p>子类包含父类的所有属性,但不一定能访问</p><p>内存空间排列顺序</p><ol><li>类的首地址</li><li>父类属性
前半部分</li><li>子类属性
后半部分</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="拷贝赋值--继承"></a>拷贝&amp;赋值--继承<a class="hash-link" href="#拷贝赋值--继承" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">拷贝构造函数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    显式调用父类拷贝构造函数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">Cat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> Cat </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Animal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token function" style="color:rgb(130, 170, 255)">__member</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">__member</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">赋值运算符</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    显式调用父类的赋值运算函数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Cat </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">operatro</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> Cat </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">this</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">__member </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">__member</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">this</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">Animal</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token keyword" style="font-style:italic">operator</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="虚继承"></a>虚继承<a class="hash-link" href="#虚继承" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="解决歧异性问题"></a>解决歧异性问题<a class="hash-link" href="#解决歧异性问题" title="Direct link to heading">#</a></h3><ol><li>指定访问的域</li><li>virtual 虚继承，虚基类</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="针对菱形继承，可以使用虚继承"></a>针对菱形继承，可以使用虚继承<a class="hash-link" href="#针对菱形继承，可以使用虚继承" title="Direct link to heading">#</a></h2><ol><li>此时无法在访问到基类（父类）对应的值</li><li>产生的对象的空间因此发生改变</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">B</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">X</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">public</span><span class="token base-clause"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">virtual</span><span class="token base-clause"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">B</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Y</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">virtual</span><span class="token base-clause"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">public</span><span class="token base-clause"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">B</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Z</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">public</span><span class="token base-clause"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">B</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 每个 AA 类型对象拥有一个 X，一个 Y，一个 Z 和两个 B：</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 其一是 Z 的基类，另一者为 X 与 Y 所共享</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">AA</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">X</span><span class="token base-clause punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token base-clause"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">Y</span><span class="token base-clause punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token base-clause"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">Z</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">f</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        X</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">n </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 修改虚 B 子对象的成员</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Y</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">n </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 修改同一虚 B 子对象的成员</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Z</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">n </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 修改非虚 B 子对象的成员</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> X</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">n </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> Y</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">n </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> Z</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">n </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;\n&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 打印 223</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="实现"></a>实现<a class="hash-link" href="#实现" title="Direct link to heading">#</a></h3><p>底层实现原理与编译器相关，一般通过虚基类指针和虚基类表实现，每个虚继承的子类都有一个虚基类指针（占用一个指针的存储空间）和虚基类表（不占用类对象的存储空间）（需要强调的是，虚基类依旧会在子类里面存在拷贝，只是仅仅最多存在一份而已，并不是不在子类里面了）；当虚继承的子类被当做父类继承时，虚基类指针也会被继承。</p><p>实际上，vbptr 指的是虚基类表指针（virtual base table pointer），该指针指向了一个虚基类表（virtual table），虚表中记录了虚基类与本类的偏移地址；通过偏移地址，这样就找到了虚基类成员，而虚继承也不用像普通多继承那样维持着公共基类（虚基类）的两份同样的拷贝，节省了存储空间。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nocopy"></a>nocopy<a class="hash-link" href="#nocopy" title="Direct link to heading">#</a></h2><p>如果⽗类不存在认的复制构造函数和赋值操作符重载这些函数的话，那么⼦类默认也不会⽣成</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">NotCopyable</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">NotCopyable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">NotCopyable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> NotCopyable </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">delete</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">NotCopyable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">NotCopyable </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">delete</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    NotCopyable </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">operator</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> NotCopyable </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">delete</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    NotCopyable </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">operator</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">NotCopyable </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">delete</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="运算符重载"></a>运算符重载<a class="hash-link" href="#运算符重载" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="部分运算符重载"></a>部分运算符重载<a class="hash-link" href="#部分运算符重载" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="可重载运算符"></a>可重载运算符<a class="hash-link" href="#可重载运算符" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">双目算术运算符 </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">加</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">减</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">乘</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">除</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">取模</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">关系运算符   </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">等于</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">不等于</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">小于</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">大于</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">小于等于</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">大于等于</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">逻辑运算符   </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">逻辑或</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">逻辑与</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">逻辑非</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">单目运算符   </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">正</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">负</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">指针</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">取地址</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">自增自减运算符 </span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">自增</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">--</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">自减</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">位运算符    </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">按位或</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">按位与</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">~</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">按位取反</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">按位异或</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">左移</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">右移</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">赋值运算符   </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">/=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">^=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;&gt;=</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">空间申请与释放 New</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Delete</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> New</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Delete</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">其他运算符   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">函数调用</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">成员访问</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">逗号</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">下标</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="不可重载运算符"></a>不可重载运算符<a class="hash-link" href="#不可重载运算符" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">：成员访问运算符</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">：成员指针访问运算符</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">：域运算符</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Sizeof：长度运算符</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">：条件运算符</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#： 预处理符号</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Typeid</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">强制类型转换运算符</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="重载规则"></a>重载规则<a class="hash-link" href="#重载规则" title="Direct link to heading">#</a></h3><p>（1）不可臆造运算符；
（2）运算符原有操作数的个数、优先级和结合性不能改变；
（3）操作数中至少一个是自定义类型；防止标准类型重载运算符
（4）保持重载运算符的自然含义。</p><p>（1）当重载为成员函数时，会隐含一个this指针；当重载为友元函数时，不存在隐含的this指针，需要在参数列表中显示地添加操作数。
（2）当重载为成员函数时，只允许右参数的隐式转换；当重载为友元函数时，能够接受左参数和右参数的隐式转换。</p><p>一般规则为：单目成员，双目友元</p><p>=:赋值、():函数调用、[]:下标、以及 -&gt;:指针访问类成员操作符只能被类的成员函数重载</p><p>&lt;&lt; &gt;&gt;定义为友元</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="特例"></a>特例<a class="hash-link" href="#特例" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-负号和减号"></a><strong>-负号和减号</strong><a class="hash-link" href="#-负号和减号" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">type </span><span class="token keyword" style="font-style:italic">operator</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">type </span><span class="token keyword" style="font-style:italic">operator</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> type </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="和--"></a><strong>++和--</strong><a class="hash-link" href="#和--" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> iterator </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token keyword" style="font-style:italic">operator</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">                                                    前缀</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token plain">it</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//pt = pt-&gt;next;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    自增运算符有两个版本</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    后置</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token plain">，当中</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain">是一个哑元</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    哑元：重载发生。参数的个数不同，类型不同；</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   iteratror </span><span class="token keyword" style="font-style:italic">operator</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//可省略x，不指定名称      后缀it++</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        iterator tmp </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//pt = pt-&gt;next;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> tmp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="重载方式"></a>重载方式<a class="hash-link" href="#重载方式" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="类内的重载成员函数"></a>类内的重载成员函数:<a class="hash-link" href="#类内的重载成员函数" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sum  </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">等价于sum </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword" style="font-style:italic">operator</span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="类外运算符重载函数"></a>类外运算符重载函数:<a class="hash-link" href="#类外运算符重载函数" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ostream </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token keyword" style="font-style:italic">operator</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ostream </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> Class_name </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    out </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> out</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>​	类内重载优先级高于类外重载优先级</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="多态-1"></a>多态<a class="hash-link" href="#多态-1" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="静态多态编译期"></a>静态多态(编译期)<a class="hash-link" href="#静态多态编译期" title="Direct link to heading">#</a></h2><p>编译期给定类型&gt;对应的数据类型</p><p>指针包含多层含义
-1 空间地址
-2 空间长度
-3 从空间读取出的值的类型
编译期已经确定其寻址方式</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="动态多态（运行期"></a>动态多态（运行期)<a class="hash-link" href="#动态多态（运行期" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="虚函数"></a>虚函数<a class="hash-link" href="#虚函数" title="Direct link to heading">#</a></h3><p>用 virtual 修饰成员函数,C11实现多态最关键的手段
virtual跟着对象走
非virtual跟着类走
语义:子类与父类方法可能不同
对于基类声明为virtual的函数，子类的该成员函数默认为virtual(C++11)</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="override和final描述符非关键字"></a>override和final描述符非关键字<a class="hash-link" href="#override和final描述符非关键字" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">override指定一个虚函数覆盖另一个虚函数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> func override </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">override明确编译器是在覆盖子类虚函数</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">语言严谨性</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">final指定某个虚函数不能在子类中被覆盖，</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">或者某个类不能被子类继承。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> final</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">B</span><span class="token plain"> final </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> A </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// struct B 为 final {</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> override</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 错误：foo 不能被覆盖，因为它在 A 中是 final</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">C</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">B</span><span class="token base-clause"> </span><span class="token base-clause comment" style="color:rgb(105, 112, 152);font-style:italic">// 错误：B 为 final</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="重新定义将隐藏基类方法"></a>重新定义将隐藏基类方法<a class="hash-link" href="#重新定义将隐藏基类方法" title="Direct link to heading">#</a></h3><ol><li>重新定义继承方法，原型应一致</li><li>基类声明被重载，派生类要重新定义所有基类版本，否则其他版本被隐藏</li><li>非虚函数调用:object.Base::func();</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="注意-1"></a>注意<a class="hash-link" href="#注意-1" title="Direct link to heading">#</a></h3><p>inline virtual 唯一可内联的时候是：编译器知道所调用的对象是哪个类（如 Base::who()），这只有在编译器具有实际对象而不是对象的指针或引用时才会发生。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Base</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">inline</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">virtual</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">who</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;I am Base\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">virtual</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">~</span><span class="token function" style="color:rgb(130, 170, 255)">Base</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>普通函数（非类成员函数）不能是虚函数,友元不可是虚函数，友元不是成员函数
静态函数（static）不能是虚函数
构造函数不能是虚函数（因为在调用构造函数时，虚表指针并没有在对象的内存空间中，必须要构造函数调用完成后才会形成虚表指针）</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="发生条件"></a>发生条件<a class="hash-link" href="#发生条件" title="Direct link to heading">#</a></h3><ol><li>必须有继承</li><li>必须有方法重写</li><li>基类的指针或引用绑定子类的对象</li><li>发生多态的函数必须为虚函数
注意：函数按引用传递对象和按值传递</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="消耗资源"></a>消耗资源<a class="hash-link" href="#消耗资源" title="Direct link to heading">#</a></h3><p>对象增大，存储地址
对于每个类，编译都创建一个虚函数表
函数调用需要额外到表中查找地址</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="typeid"></a>typeid<a class="hash-link" href="#typeid" title="Direct link to heading">#</a></h2><p>运行时确定对象的类型,可用于判断多态绑定
返回typeinfo对象
包含成员函数</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">hash_code</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="虚函数指针、虚函数表"></a>虚函数指针、虚函数表<a class="hash-link" href="#虚函数指针、虚函数表" title="Direct link to heading">#</a></h2><p>虚函数指针：在含有虚函数类的对象中，指向虚函数表，在运行时确定,虚函数指针位于对象首8个字节(指针大小)</p><p>每个类独立维护一个虚函数表; 注意：基类与派生类的虚函数指针的值并不同</p><p>当一个类中，没有虚函数时，程序在编译期间会生成该函数的静态地址， 通过对象指针，可以访问到该地址</p><p>虚函数表：在程序只读数据段（.rodata section，存放虚函数指针，如果派生类实现了基类的某个虚函数，则在虚表中覆盖原本基类的那个虚函数指针，
如果定义新的虚函数，添加到虚函数表，在编译时根据类的声明创建。
如果一个对象搜索不到该虚函数表。产生segmentation fault    </p><p>动态绑定用于传递结果</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="this指针"></a>this指针<a class="hash-link" href="#this指针" title="Direct link to heading">#</a></h2><ol><li>this 指针是一个隐含于每一个非静态成员函数中的特殊指针</li><li>当对一个对象调用成员函数时，编译程序先将对象的地址赋给this指针,是成员函数的首个参数,自动传递一个隐含的参数然后调用成员函数，每次成员函数存取数据成员时，都隐式使用this指针。</li><li><code>this</code> 指针被隐含地声明为: ClassName <em>const this，不能给 this<code>指针赋值；在 ClassName类的const 成员函数中，</code>this<code> 指针的类型为：</code>const ClassName</em> const<code>，不能对 </code>this` 指针所指向的这种对象是不可修改</li><li>this并不是一个常规变量，而是个右值，所以不能取得 this 的地址（不能 &amp;this）</li></ol><p>显式引用</p><ol><li>为实现对象的链式引用；</li><li>为避免对同一对象进行赋值操作；</li><li>在实现一些数据结构时，如 <code>list</code>。</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">output_raw_data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;%p : &quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">unsigned</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">p </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">unsigned</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">q</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;%02X &quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">typedef</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Cat a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">output_raw_data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">output_raw_data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">func </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        address </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token number" style="color:rgb(247, 140, 108)">0x7ffd4f01d580</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">18</span><span class="token plain"> DD FE </span><span class="token number" style="color:rgb(247, 140, 108)">19</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">B </span><span class="token number" style="color:rgb(247, 140, 108)">56</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">00</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">00</span><span class="token plain"> FB E0 </span><span class="token number" style="color:rgb(247, 140, 108)">01</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">00</span><span class="token plain"> DB </span><span class="token number" style="color:rgb(247, 140, 108)">4F</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">05</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">00</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">address </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token number" style="color:rgb(247, 140, 108)">0x7ffd4f01d590</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">18</span><span class="token plain"> DD FE </span><span class="token number" style="color:rgb(247, 140, 108)">19</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">B </span><span class="token number" style="color:rgb(247, 140, 108)">56</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">00</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">00</span><span class="token plain"> FB E0 </span><span class="token number" style="color:rgb(247, 140, 108)">01</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">00</span><span class="token plain"> DB </span><span class="token number" style="color:rgb(247, 140, 108)">4F</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">05</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">00</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">address </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token number" style="color:rgb(247, 140, 108)">0x7ffd4f01d5a0</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">18</span><span class="token plain"> DD FE </span><span class="token number" style="color:rgb(247, 140, 108)">19</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">B </span><span class="token number" style="color:rgb(247, 140, 108)">56</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">00</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">00</span><span class="token plain"> FB E0 </span><span class="token number" style="color:rgb(247, 140, 108)">01</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">00</span><span class="token plain"> DB </span><span class="token number" style="color:rgb(247, 140, 108)">4F</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">05</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">00</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">0x7ffd4f01d580</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">123131</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">348123</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">miao</span><span class="token operator" style="color:rgb(137, 221, 255)">~</span><span class="token plain"> miao</span><span class="token operator" style="color:rgb(137, 221, 255)">~</span><span class="token plain"> miao</span><span class="token operator" style="color:rgb(137, 221, 255)">~</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="纯虚函数"></a>纯虚函数<a class="hash-link" href="#纯虚函数" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">virtual</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>语义:定义接口
类里如果声明了虚函数，这个函数是实现的，哪怕是空实现，它的作用就是为了能后期绑定来达到多态了
纯虚函数只是一个接口，是个函数的声明而已，在基类中不能对虚函数给出有意义的实现，它要留到子类里去实现。
虚函数在子类里面可以不重写；但纯虚函数必须在子类实现才可以实例化子类。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="抽象类"></a>抽象类<a class="hash-link" href="#抽象类" title="Direct link to heading">#</a></h2><p>拥有纯虚函数的类，称为抽象类;
接口类:只有虚函数
派生类没有对纯虚函数进行实现，那么派生类也是抽象类</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="虚析构函数"></a>虚析构函数<a class="hash-link" href="#虚析构函数" title="Direct link to heading">#</a></h2><p>做基类析构函数应为虚函数：解决基类的指针指向派生类对象，并用基类的指针删除派生类对象,否则不调用派生类的析构函数。
delete释放内存时，先调用子类析构函数，再调用基类析构函数，防止内存泄漏。
可以dynamic_cast</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="泛型编程"></a>泛型编程<a class="hash-link" href="#泛型编程" title="Direct link to heading">#</a></h1><blockquote><p>泛型编程:将任意类型从程序设计中抽象出来</p><p>程序=数据结构+算法</p><p>数据结构 能存储任意类型
算法 能操作存储任意类型的数据结构</p></blockquote><table><thead><tr><th>泛型编程</th><th>抽象</th><th>模板</th></tr></thead><tbody><tr><td>面向过程编程</td><td>将相关过程抽象成函数，对参数抽象</td><td>模板函数</td></tr><tr><td>面向对象编程</td><td>将相关对象抽象成类，对类型抽象</td><td>模板类</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="模板声明：编译器实现的模板的实例化"></a>模板声明：编译器实现的模板的实例化<a class="hash-link" href="#模板声明：编译器实现的模板的实例化" title="Direct link to heading">#</a></h2><p>声明与定义不可分开</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//这是模板的声明</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">U</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">T a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> U b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">decltype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>SFINEA：“匹配失败不是错误”:规则表示的是对重载的模板的参数进行展开的时候，如果展开导致了一些类型不匹配，编译器并不会报错。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">template</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">AnyType</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">  C</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token number" style="color:rgb(247, 140, 108)">98</span><span class="token plain">之前使用</span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">template</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">AnyType</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> 模板特化</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">参数</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">数据类型</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">确定</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    模板函数偏特化</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">举例</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">T </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">T </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> T </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">可变参数模板</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ARGS</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> T</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ARGS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> endl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">Printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ARGS</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">模板中剩余部分的模型</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">递归出口</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>最终目标文件不包含任何模板，只包含为程序生成的实际函数，每个函数都有独立的定义,模板生产代码
模板是有逻辑,而宏是简单的代码替换
通过static 证明</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="函数版本的选择"></a>函数版本的选择<a class="hash-link" href="#函数版本的选择" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="步骤-1"></a>步骤<a class="hash-link" href="#步骤-1" title="Direct link to heading">#</a></h3><ol><li>创建候选函数列表：同名的函数和模板函数</li><li>创建可行函数列表：参数数目正确的函数，隐式转换，如float到double</li><li>确定最佳可行，没有则报错</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="优先级"></a>优先级<a class="hash-link" href="#优先级" title="Direct link to heading">#</a></h3><ol><li>完全匹配
指向const数据的指针和引用，优先与为const参数的匹配
非模板版本&gt;模板特化&gt;模板版本<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">swap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">job </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> job </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">template</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> swap</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">job</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">job </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> job </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> 显示具体化</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">特化</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">template</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">swap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">T </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> T </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li>提升转换，如char，short到int， float到double </li><li>标准转换，如int到char，long到double</li><li>用户定义的转换，如类声明中定义</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="过程"></a>过程<a class="hash-link" href="#过程" title="Direct link to heading">#</a></h2><ol><li>预处理展开宏 typeof</li><li>模板的实例化</li><li>模板阶段decltype</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="引用折叠"></a>引用折叠<a class="hash-link" href="#引用折叠" title="Direct link to heading">#</a></h2><p>主要用于模板</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">奇数</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">左值引用</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">X</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> 可折叠成 X</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">偶数</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">右值引用</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">X</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> 可折叠成 X</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">template</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">swap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">T </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> T </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//&amp;&amp;表示传引用：左值和右值引用; &amp;表示左值引用</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//T c = a; //error 引用折叠</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//去除引用</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">remove_reference</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">type c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    c </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    a </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> b </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="类型转换-1"></a>类型转换<a class="hash-link" href="#类型转换-1" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">C</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token plain">有一套</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">remove_reference</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">remove_pointer</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="模板的图灵完备性"></a>模板的图灵完备性<a class="hash-link" href="#模板的图灵完备性" title="Direct link to heading">#</a></h2><p>输入、输出、内部状态、计算规则
任何程序中需要表达的计算，都可以通过元编程的方式来表达</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="c新特性"></a>C++新特性<a class="hash-link" href="#c新特性" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="语言可用性"></a>语言可用性<a class="hash-link" href="#语言可用性" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="常量"></a>常量<a class="hash-link" href="#常量" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nullptr11"></a>nullptr(11)<a class="hash-link" href="#nullptr11" title="Direct link to heading">#</a></h4><p>空指针类型</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">可能实现</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">NULL</span><span class="token macro property"> </span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// C++11 起</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">NULL</span><span class="token macro property"> </span><span class="token macro property expression">nullptr</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">C 中，宏 </span><span class="token constant" style="color:rgb(130, 170, 255)">NULL</span><span class="token plain"> 可以拥有类型 </span><span class="token keyword" style="font-style:italic">void</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> ，但这在 C</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token plain"> 中不允许</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token constant" style="color:rgb(130, 170, 255)">NULL</span><span class="token plain"> 是</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">既是整型又是指针类型</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>nullptr是一个“指针空值类型”的编译期右值常量
nullptr_t类型数据可以且只可以隐式转换成任意一个指针类型,能转换为非指针类型，即使使用reinterpret_cast&lt;nullptr_t&gt;()的方式也是不可</p><p>nullptr_t类型数据仅能与nullptr_t类型数据或者指针类型数据进行比较
在把nullptr_t应用于模板中时候，我们会发现模板却只能把它作为一个普通的类型(nullptr_t)来进行推导,并不会将其视为<code>T*指针</code>，要让编译器成功推导出nullptr的类型，必须做显式的类型转换</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="constexptr1114"></a>constexptr(11/14)<a class="hash-link" href="#constexptr1114" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> b </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> b </span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">666</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">constexptr res </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> b </span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> n </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> num </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//编译器可能做优化,在编译期直接将num替换为10</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">constexpr</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">f</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//可以返回一个编译期常量对象,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//而不是必须,也可以返回运行期对象</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    函数必须返回值（不能是Void函数）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// C++11 Constexpr 函数必须把一切放在单条 Return 语句中</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// （C++14 无此要求）</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="常量表达式的构造函数"></a>常量表达式的构造函数<a class="hash-link" href="#常量表达式的构造函数" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">A</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">constexpr</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">A</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> n </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cin </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;&gt;</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> n </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//运行期常量,不可修改的量,只读的变量</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">constexpr</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> b </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//编译期常量,替代宏</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">constexpr</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">f</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">567</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">constexpr</span><span class="token plain"> A </span><span class="token function" style="color:rgb(130, 170, 255)">d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>约束</strong></p><ol><li>函数体必须为空</li><li>初始化列表只能由常量表达式来赋值</li></ol><p>编译期常量替代define宏</p><p> constexpr即常量表达式(constant expression)</p><p>验证表达式是否具备常性，避免函数返回值等隐式改变</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="变量及其初始化"></a>变量及其初始化<a class="hash-link" href="#变量及其初始化" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">if</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token keyword" style="font-style:italic">switch</span><span class="token plain">初始化</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">17</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">初始化列表</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">11</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">结构化绑定</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">11</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token number" style="color:rgb(247, 140, 108)">14</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token number" style="color:rgb(247, 140, 108)">17</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">tuple元组</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">tuple</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">type1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> type2</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">make_tuple</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> v2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="类型推导"></a>类型推导<a class="hash-link" href="#类型推导" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="auto11"></a>auto(11)<a class="hash-link" href="#auto11" title="Direct link to heading">#</a></h4><p>编译期确定：静态编译类型推导，需要初始化</p><p>auto并非一种“类型”声明，而是一个类型声明时的“占位符”，编译器在编译时期会将auto替代为变量实际的类型</p><p>auto来声明多个变量类型时，只有第一个变量用于auto的类型推导，然后推导出来的数据类型被作用于其他的变量</p><p><strong>限制</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    不可做函数形参</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    不可用实例化模板的时候使用的模板参数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">auto</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> v</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    不可声明数组</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    不可用于类的非静态成员变量</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        编译器阻止</span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain">对结构体中的非静态成员进行推导即使成员拥有初始值</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">typeid</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">T</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol><li>模板,lambda后置返回</li><li>STL迭代器,遍历</li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="decltype11"></a>decltype(11)<a class="hash-link" href="#decltype11" title="Direct link to heading">#</a></h4><p>只推导,不计算，与模板实例化在同一时期</p><p>decltype以一个普通的表达式为参数，返回该表达式的类型，函数名不可做参数</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">double</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">decltype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">后置返回类型</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">template</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">It</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fcn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">It beg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> It end</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">decltype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">beg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 处理序列</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">beg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 返回序列中一个元素的引用</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token keyword" style="font-style:italic">decltype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>四规则</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token number" style="color:rgb(247, 140, 108)">1.</span><span class="token plain">无括号</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">double</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">decltype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> 为</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">double</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">2.</span><span class="token plain">函数调用</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    查看函数原型确定返回值类型，而不实际调用</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">long</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">decltype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> 为</span><span class="token keyword" style="font-style:italic">long</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">2.</span><span class="token plain">是一个将亡值</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    如果e是一个将亡值</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">xvalue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，那么</span><span class="token keyword" style="font-style:italic">decltype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">为T</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain">。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">3.</span><span class="token plain">是一个左值</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">double</span><span class="token plain"> xx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">decltype</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">xx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> 为 </span><span class="token keyword" style="font-style:italic">double</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">decltype</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">xx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> 为</span><span class="token keyword" style="font-style:italic">double</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">4.</span><span class="token plain">其他</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    表达式的类型</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">k </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">n </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token keyword" style="font-style:italic">decltype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">k </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">位</span><span class="token keyword" style="font-style:italic">int</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cv限制符"></a>cv限制符<a class="hash-link" href="#cv限制符" title="Direct link to heading">#</a></h4><p>与auto类型推导时不能“带走”cv限制符不同，decltype是能够“带走”表达式的cv限制符的</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="控制流"></a>控制流<a class="hash-link" href="#控制流" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">constexpr</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">constexpr</span><span class="token plain">编译期常量</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">区间</span><span class="token keyword" style="font-style:italic">for</span><span class="token plain">迭代</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="lambda表达式"></a>lambda表达式<a class="hash-link" href="#lambda表达式" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="函数式编程"></a>函数式编程<a class="hash-link" href="#函数式编程" title="Direct link to heading">#</a></h3><p>λ演算，闭包特性。闭包(closure):捕获并持有了外部作用域变量的函数
把函数当成对象
把函数对象当成参数
lambda的类型被定义为“闭包”（closure）的类而每个lambda表达式则会产生一个闭包类型的临时对象（右值）。因此，严格地讲，lambda函数并非函数指针。不过C++11标准却允许lambda表达是向函数指针的转换，但前提是lambda函数没有捕捉任何变量</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="原理"></a>原理<a class="hash-link" href="#原理" title="Direct link to heading">#</a></h3><p>c++实现原理是不同于FP语言(因为其他语言大多数是带GC和通过引用传递)</p><p>事实上，在C++11中lambda也被处理为匿名的仿函数。
当创建lambda函数的时候，编译器内部会生成这样一个仿函数，并从其父作用域中取得参数传递给lambda函数。
不过，真正会改变人们思维方式的是，lambda是一个局部函数</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> b </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">mutable</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain">，并引用方式捕获  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> value </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">           </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 重点</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> b </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">                </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 重点</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">make_pair</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        C</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token number" style="color:rgb(247, 140, 108)">14</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">绑定到函数对象并使用引用方式捕获x   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">mutable</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 重点</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> b </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">                </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 重点</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">make_pair</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            智能指针  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">make_shared</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 重点</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> b </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">make_pair</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>c++不能延长栈变量生命周期,因为局部变量永远都需要在作用域结束后析构
RAII:保证在任何情况下，使用对象时先构造对象，最后析构对象。
b拷贝了一份x到自己的函数对象(闭包)中。因为在语义上，lambda是作为一个语句块的，语句块结束后变量都要析构。也就是x不管怎样都要销毁的。而不像fp语言，能做到延长它的生命</p><p><strong>占用空间</strong></p><p>不捕获其他值的lambda，等价于一个空对象，一般只占用1个字节
因为c++要确保两个不同对象的地址不同，一个对象至少要有一个字节(哪怕是空的)
有捕获的，字节数等于按值捕获的值的字节数+按引用捕获的值的个数* 8
因为引用捕获实际上是指针实现</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="基础"></a>基础<a class="hash-link" href="#基础" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> func </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">捕获列表</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">参数列表</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">说明符 异常属性</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">返回类型 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">函数体</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain">推导返回值类型</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    第一个</span><span class="token keyword" style="font-style:italic">return</span><span class="token plain">语句和</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">返回类型</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain">确定类型function</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain">推导返回值类型</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    第一个</span><span class="token keyword" style="font-style:italic">return</span><span class="token plain">语句和</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">返回类型</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain">确定类型function</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="捕获"></a>捕获<a class="hash-link" href="#捕获" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> 默认不可以访问外部变量</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Temp_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//默认不可以访问外部变量</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> func </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Temp_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">如果</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">可以捕获外部变量</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">就会产生段错误</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">默认捕获符 </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">、</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">（以引用隐式捕获）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> （以复制隐式捕获）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        复制捕获的对象在 lambda 体内为 </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    任何捕获符只可以出现一次</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">S2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">f</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">S2</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">f</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">          </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// OK：默认以引用捕获</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// OK：以引用捕获，但 i 以值捕获</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 错误：以引用捕获为默认时的以引用捕获</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// OK：等价于 [&amp;]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// OK：等价于 [&amp;, i]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">this</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    可访问类的成员函数内部，成员变量</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="形参"></a>形参<a class="hash-link" href="#形参" title="Direct link to heading">#</a></h4><p>当以 auto 为形参类型时，该 lambda 为泛型 lambda(14)</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ret </span><span class="token keyword" style="font-style:italic">operator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">形参</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> 函数体 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">未使用</span><span class="token keyword" style="font-style:italic">mutable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ret </span><span class="token keyword" style="font-style:italic">operator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">形参</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> 函数体 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">使用了 </span><span class="token keyword" style="font-style:italic">mutable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="说明符"></a>说明符<a class="hash-link" href="#说明符" title="Direct link to heading">#</a></h4><p>mutable：允许函数体修改各个复制捕获的对象，以及调用其非const成员函数</p><p>可以完成一种功能委托和通信方式交流</p><p>函数指针是单向的，lambda是双向的</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> Data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="泛型化"></a>泛型化<a class="hash-link" href="#泛型化" title="Direct link to heading">#</a></h3><p>参数列表为auto</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">可以支持隐式推导功能，制作类似于模板的功能</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain">是静态编译时确定，lambda是动态运行时确定</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> add </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;b&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="stdfunction"></a>std::function<a class="hash-link" href="#stdfunction" title="Direct link to heading">#</a></h2><p>类似于函数对象的概念；就是以对象的方式说明函数指针的作用 </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="模板中不可进行间接类型推导"></a>(模板中)不可进行间接类型推导<a class="hash-link" href="#模板中不可进行间接类型推导" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">template</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">typename</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">T </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> T </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//&amp;和&amp;&amp;都表示传引用</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    a </span><span class="token operator" style="color:rgb(137, 221, 255)">+=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    b </span><span class="token operator" style="color:rgb(137, 221, 255)">+=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">function</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Int </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//错误</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>可以指向任意可调用对象</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="stdbind和stdplaceholder"></a>std::bind和std::placeholder<a class="hash-link" href="#stdbind和stdplaceholder" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;functional&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">placeholders 表示调用时传递的参数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">max</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">max</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> bindFunc </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">bind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">placeholders</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">_1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">double</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">function</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">double</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">f </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">bind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">placeholders</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">_2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">placeholders</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">_1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><img alt="image-20210907110128315" src="/assets/images/image-20210907110128315-ead051773737224b8431df2f2dd8df2d.png"></p><p>默认时拷贝(传值),使用ref(arg)为传引用</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="值的类型，表达式"></a>值的类型，表达式<a class="hash-link" href="#值的类型，表达式" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="左值和右值是值"></a>左值和右值是值<a class="hash-link" href="#左值和右值是值" title="Direct link to heading">#</a></h3><p>左值，右值(纯右值，将亡值)</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="判断"></a>判断<a class="hash-link" href="#判断" title="Direct link to heading">#</a></h4><ol><li>越过该行代码,还能否通过单一变量访问相关的值,能左值,不能右值</li><li>有名能取地址的是左值</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">n</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> endl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//右值,简单理解:临时的变量,不可以修改的</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> endl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//左值,简单理解:可以操作的变量,可引用</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//结合重载++运算符理解</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> endl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//cout &lt;&lt; (n++)++ &lt;&lt; endl;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="右值可以理解为即将消亡"></a>右值可以理解为即将消亡<a class="hash-link" href="#右值可以理解为即将消亡" title="Direct link to heading">#</a></h4><p>只要能够绑定右值的引用类型，都能够延长右值的生命期</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="判断左值"></a>判断左值<a class="hash-link" href="#判断左值" title="Direct link to heading">#</a></h4><p>is_lvalue_reference</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tip"></a>tip<a class="hash-link" href="#tip" title="Direct link to heading">#</a></h3><ol><li>左绑左，右绑右</li><li>不管啥，先看const
const左值引用可以绑定任意类型
所以ostream参数是const T &amp;类型</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="左值引用和右值引用"></a>左值引用&amp;和右值引用&amp;&amp;<a class="hash-link" href="#左值引用和右值引用" title="Direct link to heading">#</a></h3><p>左值引用&amp;和右值引用&amp;&amp;是引用,变量的别名</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="stdmove和stdforword"></a>std::move和std::forword<a class="hash-link" href="#stdmove和stdforword" title="Direct link to heading">#</a></h3><p>move强制变右值
forward变成任意类型的值
为了解决完美传值过程</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">move</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">forward</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">move基本等同于</span><span class="token keyword" style="font-style:italic">static_cast</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">lvalue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>主要是因为重载，调用正确的重载函数</p><p>完美转发perfect forwarding
在函数模板中，完全依照模板的参数的类型，将参数传递给函数模板中调用的另外一个函数</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="引用折叠-1"></a>引用折叠<a class="hash-link" href="#引用折叠-1" title="Direct link to heading">#</a></h3><p>主要用于模板
奇数:左值引用
偶数:右值引用</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="值的类型"></a>值的类型<a class="hash-link" href="#值的类型" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="左值"></a>左值<a class="hash-link" href="#左值" title="Direct link to heading">#</a></h4><p>可以被引用的数据对象，如：变量，数组元素，结构成员，引用和解除引用的指针,字符串变量等。
const变量属于不可修改的左值（可通过地址访问所以是左值）</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="左值-1"></a>左值<a class="hash-link" href="#左值-1" title="Direct link to heading">#</a></h3><p>可以由内建的取址运算符取左值的地址：&amp;++i[1] 及 &amp;std::endl 是合法表达式
可修改的左值可用作内建赋值和内建复合赋值运算符的左操作数。
左值可用于初始化左值引用；变量的别名</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="拥有身份且不可被移动的表达式，左值-lvalue表达式；"></a>拥有身份且不可被移动的表达式，左值 (lvalue)表达式；<a class="hash-link" href="#拥有身份且不可被移动的表达式，左值-lvalue表达式；" title="Direct link to heading">#</a></h4><ul><li>变量、函数、模板形参对象 (C++20 起)或数据成员的名字，不论其类型，例如 std::cin 或 std::end</li><li>返回类型为左值引用的函数调用或重载运算符表达式，例如 str1 = str2 或 ++it；</li><li>a = b，a += b，a %= b，以及所有其他内建的赋值及复合赋值表达式,连续赋值</li><li>++a 和 --a，内建的前置自增与前置自减表达式；</li><li>*p，内建的间接寻址表达式；</li><li>字符串字面量，例如 &quot;Hello, world!&quot;；只读的左值</li><li>转换为左值引用类型的转型表达式，例如 static_cast&lt;int&amp;&gt;(x)；</li><li>返回类型是到函数的右值引用的函数调用表达式或重载的运算符表达式c++11</li><li>转换为函数的右值引用类型的转型表达式，如 static_cast&lt;void (&amp;&amp;)(int)&gt;(x) ，c++11</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="右值（纯右值亡值"></a>右值（纯右值,亡值)<a class="hash-link" href="#右值（纯右值亡值" title="Direct link to heading">#</a></h3><p>右值不能由内建的取址运算符取地址：&amp;int()、&amp;i++[3]、&amp;42 及&amp;std::move(x) 是非法的。
右值不能用作内建赋值运算符及内建复合赋值运算符的左操作数。
右值可以用于初始化 const 左值引用，这种情况下该右值所标识的对象的生存期被延长到该引用的作用域结尾。
右值可以用于初始化右值引用，这种情况下该右值所标识的对象的生存期被延长到该引用的作用域结尾。
当被用作函数实参且该函数有两种重载可用</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="不拥有身份且可被移动的表达式，纯右值-prvalue表达式；"></a>不拥有身份且可被移动的表达式，纯右值 (prvalue)表达式；<a class="hash-link" href="#不拥有身份且可被移动的表达式，纯右值-prvalue表达式；" title="Direct link to heading">#</a></h4><ul><li>除了字符串字面量之外的）字面量，例如 42、true 或 nullptr；</li><li>返回类型是非引用的函数调用或重载运算符表达式，例如 str.substr(1, 2)、str1 + str2 或 it++；</li><li>a++ 和 a--，内建的后置自增与后置自减表达式；</li><li>a + b、a % b、a &amp; b、a &lt;&lt; b，以及其他所有内建的算术表达式；</li><li>a &amp;&amp; b、a || b、!a，内建的逻辑表达式；</li><li>a &lt; b、a == b、a &gt;= b 以及其他所有内建的比较表达式；</li><li>&amp;a，内建的取地址表达式；</li><li>转换为非引用类型的转型表达式，例如<code> static_cast&lt;double&gt;(x)</code>、<code>std::string{} </code>或 <code>(int)42</code>；</li><li>this 指针；</li><li>枚举项;</li><li>lambda 表达式，例如<code> [](int x){ return x * x; }；(C++11 起)</code></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="拥有身份且可被移动的表达式，亡值-xvalue表达式；"></a>拥有身份且可被移动的表达式，亡值 (xvalue)表达式；<a class="hash-link" href="#拥有身份且可被移动的表达式，亡值-xvalue表达式；" title="Direct link to heading">#</a></h4><ul><li>返回类型为对象的右值引用的函数调用或重载运算符表达式，例如 std::move(x)；</li><li>a[n]，内建的下标表达式，其操作数之一是数组右值；</li><li>a.m，对象成员表达式，其中 a 是右值且 m 是非引用类型的非静态数据成员；</li><li>a.*mp，对象的成员指针表达式，其中 a 为右值且 mp 为数据成员指针；</li><li>转换为对象的右值引用类型的转型表达式，例如 <code>static_cast&lt;char&amp;&amp;&gt;(x)；</code></li><li>在临时量实质化后，任何指代该临时对象的表达式</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="不拥有身份且不可被移动的表达式无法使用"></a>不拥有身份且不可被移动的表达式无法使用<a class="hash-link" href="#不拥有身份且不可被移动的表达式无法使用" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="移动构造函数"></a>移动构造函数<a class="hash-link" href="#移动构造函数" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">A </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">p </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">A</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">A a </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">move</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//节约开辟对象空间,深拷贝,直接移动相关存储区的指向 O(n)-&gt;O(1)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">delete</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">A</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">A </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain">obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">arr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">arr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//移动构造:右值引用</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;move constructor&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> endl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">arr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">nullptr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="rvo返回值优化："></a>RVO返回值优化：<a class="hash-link" href="#rvo返回值优化：" title="Direct link to heading">#</a></h4><p>return value optimization
把使用权直接给新空间，无序销毁临时空间，类似于剪切</p><p>创建临时空间
存储数据到临时空间
再从临时空间中数据传递到新空间
销毁临时空间</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="智能指针，内存管理"></a>智能指针，内存管理<a class="hash-link" href="#智能指针，内存管理" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="内存问题"></a>内存问题<a class="hash-link" href="#内存问题" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="野指针"></a>野指针<a class="hash-link" href="#野指针" title="Direct link to heading">#</a></h4><p>一些内存单元已被释放，之前指向它的指针却还在被使用</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="重复释放"></a>重复释放<a class="hash-link" href="#重复释放" title="Direct link to heading">#</a></h4><p>程序试图去释放已经被释放过的内存单元，或者释放已经被重新分配过的内存单元，就会导致重复释放错误</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="内存泄漏"></a>内存泄漏<a class="hash-link" href="#内存泄漏" title="Direct link to heading">#</a></h4><p>不再需要使用的内存单元如果没有被释放就会导致内存泄漏</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">头文件：#include </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">memory</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">auto_ptr</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">string</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ps</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token function" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">；</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="shared_ptr，仅支持new"></a>shared_ptr，仅支持new<a class="hash-link" href="#shared_ptr，仅支持new" title="Direct link to heading">#</a></h3><p>共享式拥有.多个智能指针指向相同对象,该对象和其相关资源会在“最后一个 reference 被销毁”时被释放.通过引用计数</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="auto_ptr（被-c11-弃用）"></a>auto_ptr（被 C++11 弃用）<a class="hash-link" href="#auto_ptr（被-c11-弃用）" title="Direct link to heading">#</a></h3><p>缺乏语言特性如 “针对构造和赋值” 的std::move 语义，以及其他瑕疵。
auto_ptr 可以赋值拷贝,复制拷贝后所有权转移;unqiue_ptr 无拷贝赋值语义,但实现了std::move 语义；
auto_ptr 对象不能管理数组(析构调用delete),unique_ptr 可以管理数组(析构调用 delete[] );</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="unique_ptr取代-auto_ptr"></a>unique_ptr取代 auto_ptr<a class="hash-link" href="#unique_ptr取代-auto_ptr" title="Direct link to heading">#</a></h3><p>独占式拥有或严格拥有概念，保证同一时间内只有一个智能指针可以指向该对象。你可以移交拥有权。避免内存泄漏（resource leak）</p><p>unique_ptr则是一个删除了拷贝构造函数、保留了移动构造函数的指针封装类型
所有权仅能够通过标准库的move函数来转移</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="shared_ptr的辅助类weak_ptr"></a>shared_ptr的辅助类weak_ptr<a class="hash-link" href="#shared_ptr的辅助类weak_ptr" title="Direct link to heading">#</a></h3><p>不建立强关系
不进行引用计数加1，可能只使用而不修改
防止环形引用
在 default 和 copy 构造函数之外，weak_ptr 只提供 “接受一个 shared_ptr” 的构造函数。
weak_ptr成员lock
返回其指向内存的一个shared_ptr对象，且在所指对象内存已经无效时，返回指针空值nullptr</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="面向对象语言"></a>面向对象语言<a class="hash-link" href="#面向对象语言" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="java-android"></a>Java-&gt;Android<a class="hash-link" href="#java-android" title="Direct link to heading">#</a></h4><p>内存管理：GC-&gt;garbage colletion垃圾回收机制</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="oc-ios"></a>OC-&gt;iOS<a class="hash-link" href="#oc-ios" title="Direct link to heading">#</a></h4><p>MRC：手动引用计数 reference count</p><p>ARC：自动引用计数 automatic reference count</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cc-sharp"></a>C#(C sharp)<a class="hash-link" href="#cc-sharp" title="Direct link to heading">#</a></h4><p>内存管理：自动管理，采用垃圾回收机制
不再提供对指针类型的支持，使得程序不能随便访问内存地址空间</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="垃圾回收机制"></a>垃圾回收机制<a class="hash-link" href="#垃圾回收机制" title="Direct link to heading">#</a></h4><p>基于引用计数(reference counting garbage collector)
引用计数主要是使用系统记录对象被引用（引用、指针）的次数。当对象被引用的次数变为0时，该对象即可被视作“垃圾”而回收
难处理“环形引用”问题，此外由于计数带来的额外开销
基于跟踪处理(tracing garbage collector)
标记-清除(Mark-Sweep)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="强制类型转换-1"></a>强制类型转换<a class="hash-link" href="#强制类型转换-1" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dynamic_cast新类型表达式"></a><code>dynamic_cast&lt;新类型&gt;(表达式)	</code><a class="hash-link" href="#dynamic_cast新类型表达式" title="Direct link to heading">#</a></h3><p>新类型	-	指向完整类类型的指针、到完整类类型的引用，或指向（可选的 cv 限定）void 的指针</p><p>表达式	-	若 新类型 为引用，则为完整类类型的左值 (C++11 前)泛左值 (C++11 起)表达式，若 新类型 为指针，则为指向完整类类型的指针纯右值。</p><p>若转型成功，则 dynamic_cast 返回 新类型 类型的值。若转型失败且 新类型 是指针类型，则它返回该类型的空指针。
若转型失败且 新类型 是引用类型，则它抛出与类型 std::bad_cast 的处理块匹配的异常。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="限制-1"></a>限制<a class="hash-link" href="#限制-1" title="Direct link to heading">#</a></h3><p>用于多态类型的转换
执行行运行时类型检查
只适用于指针或引用
对不明确的指针的转换将失败（返回 nullptr），但不引发异常
可以在整个类层次结构中移动指针，包括向上转换、向下转换</p><p>基类与派生类的转换原理是虚指针</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="static_cast新类型表达式"></a><code>static_cast&lt;新类型&gt;(表达式)</code><a class="hash-link" href="#static_cast新类型表达式" title="Direct link to heading">#</a></h3><p>用隐式和用户定义转换的组合在类型间转换</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 1: 初始化转换    </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> n </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static_cast</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">3.14</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> v </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static_cast</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;v.size() = &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;\n&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//10</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 2: 静态向下转型</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    D d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    B</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> br </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 通过隐式转换向上转型</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    br</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">hello</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    D</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> another_d </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static_cast</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">D</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">br</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 向下转型</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    another_d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">hello</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 3: 左值到右值</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> v2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static_cast</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">B</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> m </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">hello</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello world, this is B!\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">D</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">B</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">hello</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        std</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello world, this is D!\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="static_cast与dynamic_cast"></a>static_cast与dynamic_cast<a class="hash-link" href="#static_cast与dynamic_cast" title="Direct link to heading">#</a></h3><p>static_cast 跟 dynamic_cast 的区别就是，不检查 基类指针 到底是不是 对应的派生类 ，就直接转换。如果不是的话，你就会拿到⼀个野指针，使⽤它就会发⽣ undefined behavior。</p><p>dynamic_cast 也可以在⽗类的⼏个⼦类下转换，如果不返回 nullptr 就代表你的转换成功
这个指针指向的的确是你需要的类型的对象。⽽ static_cast 这样做会有语法错误</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="const_cast"></a>const_cast<a class="hash-link" href="#const_cast" title="Direct link to heading">#</a></h3><p>用于删除 const、volatile 和 __unaligned 特性（如将 const int 类型转换为 int 类型 ）</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="reinterpret_cast"></a>reinterpret_cast<a class="hash-link" href="#reinterpret_cast" title="Direct link to heading">#</a></h3><p>用于位的简单重新解释。不管类型之间的关系，强⾏将⼀个指针重新解释成另 ⼀个类型</p><p>不能丢掉 const、volatile 或 __unaligned 特性</p><p>reinterpret_cast 的一个实际用途是在哈希函数中，即，通过让两个不同的值几乎不以相同的索引结尾的方式将值映射到索引</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="rtti运行时类型信息"></a>RTTI运行时类型信息<a class="hash-link" href="#rtti运行时类型信息" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dynamic_cast"></a>dynamic_cast<a class="hash-link" href="#dynamic_cast" title="Direct link to heading">#</a></h3><p>用于多态类型的转换
虚函数指针</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="typeid-1"></a>typeid<a class="hash-link" href="#typeid-1" title="Direct link to heading">#</a></h3><p>运行时确定对象的类型,可用于判断多态绑定
返回typeinfo对象的引用
包含成员函数</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">hash_code</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pod"></a>POD<a class="hash-link" href="#pod" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="平凡的trivial"></a>平凡的(trivial)<a class="hash-link" href="#平凡的trivial" title="Direct link to heading">#</a></h3><p>拥有平凡的默认构造函数,析构函数</p><ol><li>平凡的默认构造函数就是说构造函数:什么都不干</li><li>一旦定义了构造函数，即使构造函数不包含参数，函数体里也没有任何的代码，那么该构造函数也不再是“平凡”的</li><li>编译器默认生成或使用default</li></ol><p>拥有平凡的拷贝构造函数和移动构造函数
平凡的拷贝构造函数基本上等同于使用memcpy进行类型的构造
有平凡的拷贝赋值运算符和移动赋值运算符
不能包含虚函数以及虚基类</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="判断-1"></a>判断<a class="hash-link" href="#判断-1" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;type_traits&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> is_trivial</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Trivial</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">value </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> endl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> is_trivial</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">NoTrivial</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">value </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> endl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="标准布局的standard-layout"></a>标准布局的(standard layout)<a class="hash-link" href="#标准布局的standard-layout" title="Direct link to heading">#</a></h3><p>所有非静态成员有相同的访问权限（public, private,protected）</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="在类或者结构体继承时"></a>在类或者结构体继承时<a class="hash-link" href="#在类或者结构体继承时" title="Direct link to heading">#</a></h4><p>满足以下两种情况之一
派生类中有非静态成员，且只有一个仅包含静态成员的基类
基类有非静态成员，而派生类没有非静态成员
非标准
实际上使得非静态成员只要同时出现在派生类和基类间，其即不属于标准布局的
多重继承:一旦非静态成员出现在多个基类中，派生类也不属于标准布局的</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">B1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">B2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">D1</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">B1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">                       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//1  </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">D2</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">B2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">          </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">D3</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">B2</span><span class="token base-clause punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token base-clause"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">B1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">D4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">B2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">                  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">D5</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">B2</span><span class="token base-clause punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token base-clause"> </span><span class="token base-clause class-name" style="color:rgb(255, 203, 107)">D1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">                        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//0  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="类中第一个非静态成员的类型与其基类不同"></a>类中第一个非静态成员的类型与其基类不同<a class="hash-link" href="#类中第一个非静态成员的类型与其基类不同" title="Direct link to heading">#</a></h4><p>该规则实际上是基于C++中允许优化不包含成员的基类而产生的
在C++标准中，如果基类没有成员，标准允许派生类的第一个成员与基类共享地址。
因为派生类的地址总是“堆叠”在基类之上的，所以这样的地址共享，表明了基类并没有占据任何的实际空间（可以节省一点数据）。
但是如果基类的第一个成员仍然是基类，编译器仍然会为基类分配1字节的空间。
分配为1字节空间是由于C++标准要求类型相同的对象必须地址不同（基类地址及派生类中成员d的地址必须不同）</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="没有虚函数和虚基类"></a>没有虚函数和虚基类<a class="hash-link" href="#没有虚函数和虚基类" title="Direct link to heading">#</a></h4><p>所有非静态数据成员均符合标准布局类型，其基类也符合标准布局</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="判断-2"></a>判断<a class="hash-link" href="#判断-2" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">is_standard_layout</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">D1</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">value</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="判断是否是pod"></a>判断是否是POD<a class="hash-link" href="#判断是否是pod" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    is_pod</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Type</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="作用-2"></a>作用<a class="hash-link" href="#作用-2" title="Direct link to heading">#</a></h3><p>字节赋值，代码中我们可以安全地使用memset和memcpy对POD类型进行初始化和拷贝等操作</p><p>提供对C内存布局兼容。C++程序可以与C函数进行相互操作，因为POD类型的数据在C与C++间的操作总是安全的</p><p>保证了静态初始化的安全有效。静态初始化在很多时候能够提高程序的性能，而POD类型的对象初始化往往更加简单（比如放入目标文件的.bss段，在初始化中直接被赋0）</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="异常处理"></a>异常处理<a class="hash-link" href="#异常处理" title="Direct link to heading">#</a></h2><p>断言适用于排除逻辑上不可能存在的状态，异常通常是用于逻辑上可能发生的错误</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="try"></a>try<a class="hash-link" href="#try" title="Direct link to heading">#</a></h3><p>抛出异常</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="catch"></a>catch<a class="hash-link" href="#catch" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="捕捉异常"></a>捕捉异常<a class="hash-link" href="#捕捉异常" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="栈展开"></a>栈展开<a class="hash-link" href="#栈展开" title="Direct link to heading">#</a></h4><p>从内部往外抛，若最终捕获不到就结束程序
异常机制会带来一些额外开销，比如函数抛出异常，会导致函数栈被依次地展开（unwind），并依帧调用在本帧中已构造的自动变量的析构函数等。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="catch-1"></a>catch(...)<a class="hash-link" href="#catch-1" title="Direct link to heading">#</a></h4><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="exception类"></a>exception类<a class="hash-link" href="#exception类" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="noexcept"></a>noexcept<a class="hash-link" href="#noexcept" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">noexcept</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> func </span><span class="token keyword" style="font-style:italic">noexcept</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    不带常量表达式的</span><span class="token keyword" style="font-style:italic">noexcept</span><span class="token plain">相当于声明了</span><span class="token keyword" style="font-style:italic">noexcept</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">，即不会抛出异常</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> func </span><span class="token keyword" style="font-style:italic">noexcept</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">常量表达式</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    常量表达式的结果会被转换成一个</span><span class="token keyword" style="font-style:italic">bool</span><span class="token plain">类型的值。该值为</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">，表示函数不会抛出异常，反之，则有可能抛出异常</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">C</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token number" style="color:rgb(247, 140, 108)">11</span><span class="token plain">标准中让类的析构函数默认也是</span><span class="token keyword" style="font-style:italic">noexcept</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">的</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="assert"></a>assert<a class="hash-link" href="#assert" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define NDEBUG          // 加上这行，则 assert 不可用</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include &lt;assert.h&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert( p != NULL );    // assert 不可用</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #ifndef _HEAD</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  #error &quot;error sequence&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#endif</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    通过#error在预处理阶段断言</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>断言，是宏，而非函数;</p><p>断言assert宏作用与运行期，如果它的条件返回错误，则终止程序执行</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="静态断言"></a>静态断言<a class="hash-link" href="#静态断言" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name function" style="color:rgb(130, 170, 255)">assert_static</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token macro property expression">expr</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token macro property expression"> </span><span class="token macro property punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token macro property"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token macro property"></span><span class="token macro property expression keyword" style="font-style:italic">do</span><span class="token macro property expression"> </span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token macro property expression keyword" style="font-style:italic">enum</span><span class="token macro property expression"> </span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token macro property expression">assert_static__ </span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">=</span><span class="token macro property expression"> </span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">1</span><span class="token macro property expression"> </span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">/</span><span class="token macro property expression"> </span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token macro property expression">expr</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token macro property expression"> </span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token macro property expression"> </span><span class="token macro property expression keyword" style="font-style:italic">while</span><span class="token macro property expression"> </span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">0</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="static_assertc11"></a>static_assert(C++11)<a class="hash-link" href="#static_assertc11" title="Direct link to heading">#</a></h2><p>static_assert接收两个参数，一个是断言表达式，这个表达式通常需要返回一个bool值；一个则是警告信息，它通常也就是一段字符串</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cpu异常分类"></a>CPU异常分类<a class="hash-link" href="#cpu异常分类" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="fault"></a>fault<a class="hash-link" href="#fault" title="Direct link to heading">#</a></h3><p>执行时触发，保存当前状态，异常处理后返回当前语句，如除0</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tarp"></a>tarp<a class="hash-link" href="#tarp" title="Direct link to heading">#</a></h3><p>执行后触发，异常处理后返回下一句，如断点</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="abort"></a>abort<a class="hash-link" href="#abort" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="执行后宕机"></a>执行后宕机<a class="hash-link" href="#执行后宕机" title="Direct link to heading">#</a></h3><p>异常本身是一个转移控制流的机制，如缺页异常</p><p><strong>面向对象</strong>：数据抽象 和 行为抽象，类是面向对象程序设计方法的核心</p><p><strong>继承</strong> ：新建一个继承了原有类的新类，具有原有类的所有特征的同时，又具有自身的新特性。通过类的这种层次结构，可以很好地反映出特殊概念与一般概念的对应关系。通常我们把被其他类继承的类叫做父类或者基类，而继承自一个父类的类则称为子类或者派生类。 </p><p><strong>多态</strong> 则是面向对象程序设计，对于人类思维方式的一种直接模拟——从广义上说，多态性指的是同一段程序，可以直接处理多种类型对象的能力。</p><p><strong>构造函数</strong> 函数名与类名完全相同 </p><ol><li>不能定义返回值类型，也不能有return语句 </li><li>可以有形参，也可以没有形参，</li><li>可以带有默认参数 可以重载</li></ol><p>若没有定义构造函数，编译器在编译的时候，就会为我们自动生成一个默认构造函数，它具有这样的特点： </p><ol><li>参数列表为空，不为数据成员赋初值;</li><li>如果类内定义了成员的初始值，则使用内类定义的初始值 </li><li>如果没有定义类内的初始值，则以默认方式初始化 </li><li>基本类型的数据默认初始化的值是不确定的（类似于我们在主函数中声明一个类却不赋初始值的情况）</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">Clock</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>复制构造函数</strong> 使用的<strong>引用传参</strong>。如果参数是一个对象的话，那么对于值传递来说，“初始化形参”，给形参分配内存空间这个过程就会造成很多额外的时间开销，浪费系统资源。而使用引用，则不会有这样的问题。</p><p>若没有，系统就会在必要的时候，自动生成一个隐含的复制构造函数。这个隐含的复制构造函数的作用是，把初始值对象的每一个数据成员的值都复制到新建的对象中。<img alt="image-20201113195043780" src="/assets/images/image-20201113195043780-a1673ab6167725ea86ba70c2f7dcaa7f.png"></p><p>复制构造函数通过一种看似“不合法”的方式，访问了Point类的实例对象p的两个私有成员变量。我们需要注意的是——private与public的区别是对类来说的，而不是对对象来说的。拷贝构造函数是Point类的成员函数——所以它可以访问类的私有成员变量，这跟具体的对象无关。</p><p>普通的构造函数（包括默认构造函数）是在对象创建的时候被调用的</p><p>复制构造函数被调用</p><ol><li><p>当用类的一个对象去初始化该类的另一个对象的时候： </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Point </span><span class="token function" style="color:rgb(130, 170, 255)">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> Point </span><span class="token function" style="color:rgb(130, 170, 255)">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>当函数的形参是类的对象，调用函数时进行形实结合的时候：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">f</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Point p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">   </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">       Point </span><span class="token function" style="color:rgb(130, 170, 255)">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">          </span><span class="token function" style="color:rgb(130, 170, 255)">f</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>、当函数的返回值是类的对象，函数执行完成返回调用者的时候：</p></li></ol><p><strong>深复制</strong> 有的时候类的数据成员中会有指针类型，这个时候默认的复制构造函数能够实现的就只有浅复制——这会带来数据安全上的隐患。要实现正确的复制，也就是所谓的深复制，就必须重新编写复制构造函数。</p><p><strong>析构函数</strong>   如果希望程序在对象被删除之前，自动地（不需要人为进行函数调用）来完成某些事情，就可以把代码写到析构函数里。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">clock</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//其他代码略      ~clock(){} //析构函数     }; </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>命名空间</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">using</span><span class="token plain"> 命名空间名</span><span class="token operator" style="color:rgb(137, 221, 255)">::</span><span class="token plain">标识符名</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//指定的某一个标识符暴露在当前的作用域内using namespace 命名空间; //直接引用整个命名空间//命名空间也是允许嵌套的，namespace Outer{     namespace Inner{           class Class{ };     }} using Outer::Inner::Class;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>前向引用声明</strong> 类似(提前函数声明)，但是在提供了一个完整的类定义之前，不能定义该类的对象，也不能在成员函数中使用该对象。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Elder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Toad</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">     Elder h</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//错误：类Elder的定义不完善}; class Elder{     Toad h;  }; </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>声明前向引用声明类的引用或者指针</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Elder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Toad</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">     Elder </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">h</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Elder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">     Toad </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">h</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//注意，即使是你声明了引用，你仍然不能在类内的方法定义中直接调用定义不完善的类的方法： class Elder; class Toad{     private:        Elder &amp;h;     public:     void setWeather(){ h.sunny();}//不合法，因为此时h尚未定义完善  }; 为此，你可以等到要调用的方法所在类定义完善之后，再在类外定义类的方法。</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>struct</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">A</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">     </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//成员变量a,b将会默认设置为私有成员。 struct A{      int a,b;  };//成员变量a,b默认会被设置为公有成员。</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">typedef</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> DoubleIntFunction</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">double</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">DoubleIntFunction funcPtr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> C++ 11 提供的 <strong>lambda 表达式</strong></p><p>C++ 为每一个类的非静态成员函数（就是没有<code>static</code>关键字的成员函数——关于静态成员的内容我们将在后续课程中介绍），都提供了一个隐含的指针<code>this</code>，当我们写下<code>return length;</code>的时候，编译器执行的实际上是<code>return this-&gt;length;</code>。</p><p><code>this</code>指针明确地指出了函数当前所操作的数据所属的对象——它是成员函数隐藏的一个形参，当我们在成员函数中操作对象的数据成员的时候，我们其实就是在使用<code>this</code>指针。</p><p>如果函数的形参列表中的参数跟成员变量重名的话，那么由于标识符作用域覆盖，我们将没法直接通过成员变量名来访问它。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">setLength</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">    </span><span class="token keyword" style="font-style:italic">this</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">length</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>对象的指针成员</strong>。对象可以有成员变量——<strong>变量的类型同样也可以是指针类型</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">vector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>如果要建立一个对象的话，那么这里的“参数列表”就要跟对象所属类的构造函数一一对应：如果不写括号或者括号里为空的话，那么就会调用类的默认构造函数；而如果写了对应的参数的话就会调用类所具有的对应的构造函数。这，就是上面我们说的<code>malloc</code>所没有的功能——<code>malloc</code>只能分配内存，并不能构造对象。</p><p>new和delete是运算符，malloc和calloc是函数</p><p><strong>所有用<code>new</code>分配的内存，都必须使用<code>delete</code>进行回收，否则会导致动态分配的内存无法回收，造成内存泄露</strong>。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">delete</span><span class="token plain"> line</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//对于基本类型或者对象的指针delete[] a;//对于指向数组的指针</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>注意如果要删除的是一个数组的话，那么<strong>后面的那对方括号不可省略</strong>。</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/worst0/wiki_note/edit/main/docs/4.Programming_Language/B1.C++.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-06-21T01:57:04.000Z" class="lastUpdatedDate_1WI_">6/21/2021</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Programming_Language/A3.C语言技巧"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« A3.C语言技巧</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Programming_Language/B3.C++-exercise"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">C++-exercise »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#引言" class="table-of-contents__link">引言</a></li><li><a href="#编程范式" class="table-of-contents__link">编程范式</a></li><li><a href="#c设计哲学" class="table-of-contents__link">C++设计哲学</a></li><li><a href="#c是c语言的超集" class="table-of-contents__link">C++是C语言的超集</a></li><li><a href="#源代码cpp" class="table-of-contents__link">源代码.cpp</a></li><li><a href="#预编译器i" class="table-of-contents__link">预编译器.i</a></li><li><a href="#编译器s" class="table-of-contents__link">编译器.s</a></li><li><a href="#汇编器o" class="table-of-contents__link">汇编器.o</a></li><li><a href="#链接器" class="table-of-contents__link">链接器</a></li><li><a href="#可执行代码" class="table-of-contents__link">可执行代码</a></li><li><a href="#名称空间" class="table-of-contents__link">名称空间</a><ul><li><a href="#using编译指令" class="table-of-contents__link"><strong>using编译指令</strong></a></li><li><a href="#using相比与typedef可以定义模板类型" class="table-of-contents__link"><strong>using相比与typedef可以定义模板类型</strong></a></li></ul></li><li><a href="#类" class="table-of-contents__link">类</a></li><li><a href="#计算机存储数据" class="table-of-contents__link">计算机存储数据</a><ul><li><a href="#输入输出" class="table-of-contents__link">输入输出</a></li></ul></li><li><a href="#参数void" class="table-of-contents__link">参数void</a></li><li><a href="#类型" class="table-of-contents__link">类型</a><ul><li><a href="#类型大小" class="table-of-contents__link">类型大小</a></li><li><a href="#typedef：类型别名" class="table-of-contents__link"><code>typedef</code>：类型别名</a></li><li><a href="#eof：文件末尾" class="table-of-contents__link"><code>EOF</code>：文件末尾</a></li><li><a href="#确定常量类型" class="table-of-contents__link">确定常量类型</a></li><li><a href="#浮点数" class="table-of-contents__link">浮点数</a></li><li><a href="#整型库" class="table-of-contents__link">整型库</a></li><li><a href="#cctype库" class="table-of-contents__link"><code>cctype</code>库</a></li></ul></li><li><a href="#整型字面值" class="table-of-contents__link">整型字面值</a></li><li><a href="#算术运算符" class="table-of-contents__link">算术运算符</a></li><li><a href="#类型转换" class="table-of-contents__link">类型转换</a><ul><li><a href="#初始化和赋值时转换" class="table-of-contents__link">初始化和赋值时转换</a></li><li><a href="#列表初始化：初始化" class="table-of-contents__link">列表初始化：{}初始化</a></li><li><a href="#表达式转换" class="table-of-contents__link">表达式转换</a></li><li><a href="#传参时的转换" class="table-of-contents__link">传参时的转换</a></li><li><a href="#强制类型转换" class="table-of-contents__link">强制类型转换</a></li></ul></li><li><a href="#指针数组字符串" class="table-of-contents__link">指针数组字符串</a><ul><li><a href="#数组" class="table-of-contents__link">数组</a></li><li><a href="#指针" class="table-of-contents__link">指针</a></li><li><a href="#指针和数组" class="table-of-contents__link">指针和数组</a></li><li><a href="#字符串" class="table-of-contents__link">字符串</a></li></ul></li><li><a href="#结构" class="table-of-contents__link">结构</a><ul><li><a href="#对齐" class="table-of-contents__link">对齐</a></li><li><a href="#struct结构体" class="table-of-contents__link"><code>struct</code>结构体</a></li><li><a href="#union共用体" class="table-of-contents__link"><code>union</code>共用体</a></li><li><a href="#enum枚举" class="table-of-contents__link"><code>enum</code>枚举</a></li></ul></li><li><a href="#函数-1" class="table-of-contents__link">函数</a><ul><li><a href="#规则" class="table-of-contents__link">规则</a></li><li><a href="#函数的执行" class="table-of-contents__link">函数的执行</a></li><li><a href="#查找函数" class="table-of-contents__link">查找函数</a></li></ul></li><li><a href="#inline内联函数" class="table-of-contents__link"><code>inline</code>内联函数</a><ul><li><a href="#特征" class="table-of-contents__link">特征</a></li><li><a href="#使用" class="table-of-contents__link">使用</a></li><li><a href="#步骤" class="table-of-contents__link">步骤</a></li><li><a href="#缺点" class="table-of-contents__link">缺点</a></li></ul></li><li><a href="#引用" class="table-of-contents__link">引用&amp;</a><ul><li><a href="#返回引用" class="table-of-contents__link">返回引用</a></li></ul></li><li><a href="#函数默认参数" class="table-of-contents__link">函数默认参数</a></li><li><a href="#函数重载（函数多态）" class="table-of-contents__link">函数重载（函数多态）</a></li><li><a href="#存储持续性" class="table-of-contents__link">存储持续性</a><ul><li><a href="#自动存储" class="table-of-contents__link">自动存储</a></li><li><a href="#静态存储" class="table-of-contents__link">静态存储</a></li><li><a href="#动态存储" class="table-of-contents__link">动态存储</a></li><li><a href="#线程存储（c11）" class="table-of-contents__link">线程存储（C++11）</a></li><li><a href="#作用域" class="table-of-contents__link">作用域</a></li><li><a href="#链接性" class="table-of-contents__link">链接性</a></li><li><a href="#extern" class="table-of-contents__link"><code>extern</code></a></li><li><a href="#exrten-c" class="table-of-contents__link"><code>exrten “C”</code></a></li><li><a href="#__cplusplus" class="table-of-contents__link">__cplusplus</a></li></ul></li><li><a href="#static" class="table-of-contents__link">static</a></li><li><a href="#const" class="table-of-contents__link">const</a><ul><li><a href="#作用" class="table-of-contents__link">作用</a></li></ul></li><li><a href="#volatile" class="table-of-contents__link">volatile</a></li><li><a href="#new和delete" class="table-of-contents__link">new和delete</a><ul><li><a href="#使用-1" class="table-of-contents__link">使用</a></li><li><a href="#作用-1" class="table-of-contents__link">作用</a></li><li><a href="#new初始化" class="table-of-contents__link">new初始化</a></li><li><a href="#定位new" class="table-of-contents__link">定位new</a></li></ul></li><li><a href="#delete-this" class="table-of-contents__link">delete this</a></li><li><a href="#原地构造" class="table-of-contents__link">原地构造</a></li><li><a href="#限定对象的存储区" class="table-of-contents__link">限定对象的存储区</a><ul><li><a href="#只能在堆上" class="table-of-contents__link">只能在堆上</a></li><li><a href="#只能在栈上" class="table-of-contents__link">只能在栈上</a></li></ul></li><li><a href="#特征-1" class="table-of-contents__link">特征</a><ul><li><a href="#封装" class="table-of-contents__link">封装</a></li><li><a href="#继承" class="table-of-contents__link">继承</a></li><li><a href="#多态" class="table-of-contents__link">多态</a></li></ul></li><li><a href="#explicit显式" class="table-of-contents__link"><code>explicit(</code>显式)</a></li><li><a href="#类-1" class="table-of-contents__link">类</a><ul><li><a href="#类对象" class="table-of-contents__link">类对象</a></li><li><a href="#类成员函数" class="table-of-contents__link">类成员函数</a></li><li><a href="#类属性和方法" class="table-of-contents__link">类属性和方法</a></li></ul></li><li><a href="#rvo返回值优化" class="table-of-contents__link">RVO返回值优化</a></li><li><a href="#类的默认函数由编译器提供" class="table-of-contents__link">类的默认函数由编译器提供</a><ul><li><a href="#成员函数" class="table-of-contents__link">成员函数</a></li><li><a href="#全局默认操作符函数" class="table-of-contents__link">全局默认操作符函数</a></li></ul></li><li><a href="#默认构造函数" class="table-of-contents__link">默认构造函数</a></li><li><a href="#default关键字" class="table-of-contents__link">default关键字</a></li><li><a href="#delete关键字" class="table-of-contents__link">delete关键字</a></li><li><a href="#默认析构函数" class="table-of-contents__link">默认析构函数</a></li><li><a href="#赋值运算符重载函数" class="table-of-contents__link">赋值运算符重载函数</a></li><li><a href="#地址运算符" class="table-of-contents__link">地址运算符</a></li><li><a href="#默认拷贝构造函数" class="table-of-contents__link">默认拷贝构造函数</a></li><li><a href="#移动赋值运算符c11" class="table-of-contents__link">移动赋值运算符(C++11)</a></li><li><a href="#拷贝、移动构造函数" class="table-of-contents__link">拷贝、移动构造函数</a></li><li><a href="#构造函数" class="table-of-contents__link">构造函数</a></li><li><a href="#析构函数" class="table-of-contents__link">析构函数</a><ul><li><a href="#不应显式调用，应由系统调用" class="table-of-contents__link">不应显式调用，应由系统调用</a></li></ul></li><li><a href="#拷贝构造函数" class="table-of-contents__link">拷贝构造函数</a></li><li><a href="#注意" class="table-of-contents__link">注意</a></li><li><a href="#继承基类成员函数" class="table-of-contents__link">继承基类成员函数</a></li><li><a href="#继承构造函数" class="table-of-contents__link">继承构造函数</a></li><li><a href="#多继承情况" class="table-of-contents__link">多继承情况</a></li><li><a href="#委派构造函数" class="table-of-contents__link">委派构造函数</a></li><li><a href="#三五法则，" class="table-of-contents__link">三/五法则，</a></li><li><a href="#成员初始化列表" class="table-of-contents__link">成员初始化列表</a></li><li><a href="#深浅拷贝" class="table-of-contents__link">深浅拷贝</a></li><li><a href="#返回对象" class="table-of-contents__link">返回对象</a></li><li><a href="#就地初始化" class="table-of-contents__link">就地初始化</a><ul><li><a href="#限制" class="table-of-contents__link">限制</a></li></ul></li><li><a href="#const，static，mutable" class="table-of-contents__link">const，static，mutable</a></li><li><a href="#友元" class="table-of-contents__link">友元</a></li><li><a href="#转换函数" class="table-of-contents__link">转换函数</a></li><li><a href="#对象数组" class="table-of-contents__link">对象数组</a></li><li><a href="#作用域为类的常量" class="table-of-contents__link">作用域为类的常量</a></li><li><a href="#类成员函数指针" class="table-of-contents__link">类成员函数指针</a></li><li><a href="#继承-2" class="table-of-contents__link">继承</a></li><li><a href="#继承权限" class="table-of-contents__link">继承权限</a></li><li><a href="#继承封装" class="table-of-contents__link">继承封装</a></li><li><a href="#基类与派生类" class="table-of-contents__link">基类与派生类</a><ul><li><a href="#关系" class="table-of-contents__link">关系</a></li></ul></li><li><a href="#构造" class="table-of-contents__link">构造</a><ul><li><a href="#存储区域父类属性子类属性" class="table-of-contents__link">存储区域:父类属性,子类属性</a></li><li><a href="#拷贝赋值--继承" class="table-of-contents__link">拷贝&amp;赋值--继承</a></li></ul></li><li><a href="#虚继承" class="table-of-contents__link">虚继承</a><ul><li><a href="#解决歧异性问题" class="table-of-contents__link">解决歧异性问题</a></li></ul></li><li><a href="#针对菱形继承，可以使用虚继承" class="table-of-contents__link">针对菱形继承，可以使用虚继承</a><ul><li><a href="#实现" class="table-of-contents__link">实现</a></li></ul></li><li><a href="#nocopy" class="table-of-contents__link">nocopy</a></li><li><a href="#部分运算符重载" class="table-of-contents__link">部分运算符重载</a><ul><li><a href="#可重载运算符" class="table-of-contents__link">可重载运算符</a></li></ul></li><li><a href="#不可重载运算符" class="table-of-contents__link">不可重载运算符</a><ul><li><a href="#重载规则" class="table-of-contents__link">重载规则</a></li><li><a href="#特例" class="table-of-contents__link">特例</a></li></ul></li><li><a href="#重载方式" class="table-of-contents__link">重载方式</a><ul><li><a href="#类内的重载成员函数" class="table-of-contents__link">类内的重载成员函数:</a></li><li><a href="#类外运算符重载函数" class="table-of-contents__link">类外运算符重载函数:</a></li></ul></li><li><a href="#静态多态编译期" class="table-of-contents__link">静态多态(编译期)</a></li><li><a href="#动态多态（运行期" class="table-of-contents__link">动态多态（运行期)</a><ul><li><a href="#虚函数" class="table-of-contents__link">虚函数</a></li><li><a href="#override和final描述符非关键字" class="table-of-contents__link">override和final描述符非关键字</a></li><li><a href="#重新定义将隐藏基类方法" class="table-of-contents__link">重新定义将隐藏基类方法</a></li><li><a href="#注意-1" class="table-of-contents__link">注意</a></li><li><a href="#发生条件" class="table-of-contents__link">发生条件</a></li><li><a href="#消耗资源" class="table-of-contents__link">消耗资源</a></li></ul></li><li><a href="#typeid" class="table-of-contents__link">typeid</a></li><li><a href="#虚函数指针、虚函数表" class="table-of-contents__link">虚函数指针、虚函数表</a></li><li><a href="#this指针" class="table-of-contents__link">this指针</a></li><li><a href="#纯虚函数" class="table-of-contents__link">纯虚函数</a></li><li><a href="#抽象类" class="table-of-contents__link">抽象类</a></li><li><a href="#虚析构函数" class="table-of-contents__link">虚析构函数</a></li><li><a href="#模板声明：编译器实现的模板的实例化" class="table-of-contents__link">模板声明：编译器实现的模板的实例化</a></li><li><a href="#函数版本的选择" class="table-of-contents__link">函数版本的选择</a><ul><li><a href="#步骤-1" class="table-of-contents__link">步骤</a></li><li><a href="#优先级" class="table-of-contents__link">优先级</a></li></ul></li><li><a href="#过程" class="table-of-contents__link">过程</a></li><li><a href="#引用折叠" class="table-of-contents__link">引用折叠</a><ul><li><a href="#类型转换-1" class="table-of-contents__link">类型转换</a></li></ul></li><li><a href="#模板的图灵完备性" class="table-of-contents__link">模板的图灵完备性</a></li><li><a href="#语言可用性" class="table-of-contents__link">语言可用性</a><ul><li><a href="#常量" class="table-of-contents__link">常量</a></li><li><a href="#常量表达式的构造函数" class="table-of-contents__link">常量表达式的构造函数</a></li><li><a href="#变量及其初始化" class="table-of-contents__link">变量及其初始化</a></li><li><a href="#类型推导" class="table-of-contents__link">类型推导</a></li><li><a href="#控制流" class="table-of-contents__link">控制流</a></li></ul></li><li><a href="#lambda表达式" class="table-of-contents__link">lambda表达式</a><ul><li><a href="#函数式编程" class="table-of-contents__link">函数式编程</a></li><li><a href="#原理" class="table-of-contents__link">原理</a></li><li><a href="#基础" class="table-of-contents__link">基础</a></li><li><a href="#泛型化" class="table-of-contents__link">泛型化</a></li></ul></li><li><a href="#stdfunction" class="table-of-contents__link">std::function</a><ul><li><a href="#模板中不可进行间接类型推导" class="table-of-contents__link">(模板中)不可进行间接类型推导</a></li><li><a href="#stdbind和stdplaceholder" class="table-of-contents__link">std::bind和std::placeholder</a></li></ul></li><li><a href="#值的类型，表达式" class="table-of-contents__link">值的类型，表达式</a><ul><li><a href="#左值和右值是值" class="table-of-contents__link">左值和右值是值</a></li><li><a href="#tip" class="table-of-contents__link">tip</a></li><li><a href="#左值引用和右值引用" class="table-of-contents__link">左值引用&amp;和右值引用&amp;&amp;</a></li><li><a href="#stdmove和stdforword" class="table-of-contents__link">std::move和std::forword</a></li><li><a href="#引用折叠-1" class="table-of-contents__link">引用折叠</a></li><li><a href="#值的类型" class="table-of-contents__link">值的类型</a></li><li><a href="#左值-1" class="table-of-contents__link">左值</a></li><li><a href="#右值（纯右值亡值" class="table-of-contents__link">右值（纯右值,亡值)</a></li><li><a href="#不拥有身份且不可被移动的表达式无法使用" class="table-of-contents__link">不拥有身份且不可被移动的表达式无法使用</a></li><li><a href="#移动构造函数" class="table-of-contents__link">移动构造函数</a></li></ul></li><li><a href="#智能指针，内存管理" class="table-of-contents__link">智能指针，内存管理</a><ul><li><a href="#内存问题" class="table-of-contents__link">内存问题</a></li><li><a href="#shared_ptr，仅支持new" class="table-of-contents__link">shared_ptr，仅支持new</a></li><li><a href="#auto_ptr（被-c11-弃用）" class="table-of-contents__link">auto_ptr（被 C++11 弃用）</a></li><li><a href="#unique_ptr取代-auto_ptr" class="table-of-contents__link">unique_ptr取代 auto_ptr</a></li><li><a href="#shared_ptr的辅助类weak_ptr" class="table-of-contents__link">shared_ptr的辅助类weak_ptr</a></li><li><a href="#面向对象语言" class="table-of-contents__link">面向对象语言</a></li></ul></li><li><a href="#强制类型转换-1" class="table-of-contents__link">强制类型转换</a><ul><li><a href="#dynamic_cast新类型表达式" class="table-of-contents__link"><code>dynamic_cast&lt;新类型&gt;(表达式)	</code></a></li><li><a href="#限制-1" class="table-of-contents__link">限制</a></li><li><a href="#static_cast新类型表达式" class="table-of-contents__link"><code>static_cast&lt;新类型&gt;(表达式)</code></a></li><li><a href="#static_cast与dynamic_cast" class="table-of-contents__link">static_cast与dynamic_cast</a></li><li><a href="#const_cast" class="table-of-contents__link">const_cast</a></li><li><a href="#reinterpret_cast" class="table-of-contents__link">reinterpret_cast</a></li></ul></li><li><a href="#rtti运行时类型信息" class="table-of-contents__link">RTTI运行时类型信息</a><ul><li><a href="#dynamic_cast" class="table-of-contents__link">dynamic_cast</a></li><li><a href="#typeid-1" class="table-of-contents__link">typeid</a></li></ul></li><li><a href="#pod" class="table-of-contents__link">POD</a><ul><li><a href="#平凡的trivial" class="table-of-contents__link">平凡的(trivial)</a></li><li><a href="#标准布局的standard-layout" class="table-of-contents__link">标准布局的(standard layout)</a></li><li><a href="#判断是否是pod" class="table-of-contents__link">判断是否是POD</a></li><li><a href="#作用-2" class="table-of-contents__link">作用</a></li></ul></li><li><a href="#异常处理" class="table-of-contents__link">异常处理</a><ul><li><a href="#try" class="table-of-contents__link">try</a></li><li><a href="#catch" class="table-of-contents__link">catch</a></li><li><a href="#exception类" class="table-of-contents__link">exception类</a></li><li><a href="#noexcept" class="table-of-contents__link">noexcept</a></li></ul></li><li><a href="#assert" class="table-of-contents__link">assert</a></li><li><a href="#static_assertc11" class="table-of-contents__link">static_assert(C++11)</a></li><li><a href="#cpu异常分类" class="table-of-contents__link">CPU异常分类</a><ul><li><a href="#fault" class="table-of-contents__link">fault</a></li><li><a href="#tarp" class="table-of-contents__link">tarp</a></li><li><a href="#abort" class="table-of-contents__link">abort</a></li><li><a href="#执行后宕机" class="table-of-contents__link">执行后宕机</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.14684a7f.js"></script>
<script src="/assets/js/main.10465fa9.js"></script>
</body>
</html>